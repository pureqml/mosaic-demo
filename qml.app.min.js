"use strict";var log=null,$manifest$author$email="team@pureqml.com",$manifest$author$name="PureQML Team",$manifest$author$organization="PureQML",$manifest$author$site="https://pureqml.com",$manifest$cssAutoClassificator=!1,$manifest$cssDisableTransformations=!1,$manifest$cssDisableTransitions=!1,$manifest$disableAnimations=!1,$manifest$domain="com.pureqml.mosaicdemo",$manifest$expectRunContextEvent=!1,$manifest$html5$prefix="",$manifest$log$disable=!1,$manifest$requireExplicitRecursiveVisibilityStyle=!1,$manifest$requireVerticalTextAlignmentStyle=!1,$manifest$resolutionHeight=720,$manifest$resolutionWidth=1280,$manifest$style$font$family="Arial",$manifest$style$font$lineHeight=1.2,$manifest$style$font$pixelSize=16,$manifest$style$font$pointSize=0,$manifest$system$fingerprint=!1,$manifest$title="mosaic",$manifest$trace$focus=!1,$manifest$trace$keys=!1,$manifest$trace$listeners=!1,$manifest$useNativeFocusForInput=!0,$manifest$virtual$height=720,$manifest$virtual$width=1280,qml=function(){var t={},k=t;k.core||(k.core={});var P=k.core;k.web||(k.web={});k.web;k.controls||(k.controls={});k.controls;k.controls.core||(k.controls.core={});var a=k.controls.core;k.controls.pure||(k.controls.pure={});k.controls.pure;k.controls.experimental||(k.controls.experimental={});var o=k.controls.experimental;k.controls.web||(k.controls.web={});var v=k.controls.web;k.controls.web.api||(k.controls.web.api={});var i=k.controls.web.api;k.video||(k.video={});k.video;k.video.html5||(k.video.html5={});k.video.html5;k.html5||(k.html5={});var r=k.html5;k.src||(k.src={});var s=k.src;k.core.core=function(){var i=k;P.device=0,P.vendor="",P.__videoBackends={},"undefined"!=typeof navigator?(i.core.os=navigator.platform,i.core.userAgent=navigator.userAgent,i.core.language=navigator.language):(i.core.os="unknown",i.core.userAgent="Unknown");function t(t,e){i.core.userAgent.indexOf(t)<0||(i.core.vendor=e.vendor,i.core.device=e.device,i.core.os=e.os)}i.core.vendor||(t("Blackberry",{vendor:"blackberry",device:2,os:"blackberry"}),t("Android",{vendor:"google",device:2,os:"android"}),t("iPhone",{vendor:"apple",device:2,os:"iOS"}),t("iPad",{vendor:"apple",device:2,os:"iOS"}),t("iPod",{vendor:"apple",device:2,os:"iOS"})),0<=i.core.userAgent.indexOf("Chromium")?i.core.browser="Chromium":0<=i.core.userAgent.indexOf("Chrome")?i.core.browser="Chrome":0<=i.core.userAgent.indexOf("Opera")?i.core.browser="Opera":0<=i.core.userAgent.indexOf("Firefox")?i.core.browser="Firefox":0<=i.core.userAgent.indexOf("Safari")?i.core.browser="Safari":0<=i.core.userAgent.indexOf("MSIE")?i.core.browser="IE":0<=i.core.userAgent.indexOf("YaBrowser")?i.core.browser="Yandex":i.core.browser="",k._backend=function(){return k.html5.html},k.core.__locationBackend=function(){return k.html5.location},k.core.__localStorageBackend=function(){return k.html5.localstorage},k.core.__videoBackends.html5=function(){return k.video.html5.backend},k.core.__deviceBackend=function(){return k.web.device},i.core.keyCodes={13:"Select",16:"Shift",17:"Ctrl",18:"LeftAlt",27:"Back",37:"Left",32:"Space",33:"PageUp",34:"PageDown",36:"Menu",38:"Up",39:"Right",40:"Down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",112:"Red",113:"Green",114:"Yellow",115:"Blue",219:"Red",221:"Green",186:"Yellow",222:"Blue",230:"RightAlt",187:"VolumeUp",189:"VolumeDown",191:"Mute",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",107:"VolumeUp",109:"VolumeDown",111:"Mute"},i.closeApp=function(){window.close()},Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function e(){}function i(){return o.apply(this instanceof e&&t?this:t,n.concat(Array.prototype.slice.call(arguments)))}var n=Array.prototype.slice.call(arguments,1),o=this;return e.prototype=this.prototype,i.prototype=new e,i},null===log&&(log=function(){for(var t="",e=0;e<arguments.length;++e)t+=arguments[e]+" ";console.log(t)})),null===log&&(log=console.log.bind(console));var c={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32","":"",transparent:"0000"};i.core.safeCall=function(e,i,n){return function(t){return function(t,e,i,n){try{return t.apply(e,i)}catch(t){n(t)}}(t,e,i,n)}},i.core.assign=function(t,e,i){for(var n=(e=e.split(".")).length-1,o=0;o<n;++o)t=t[e[o]];t[e[n]]=i},P.getKeyCodeByName=function(t){var e=P.keyCodes;for(var i in e)if(e[i]===t)return~~i};var e=P.CoreObject=function(t){this._local=Object.create(t?t._local:null)},n=e.prototype;n.componentName="core.CoreObject",n.constructor=e,n.$c=function(){},n.$s=function(){},n.__init=function(){var t={};this.$c(t),this.$s(t),this.completed()},n.__complete=function(){},n._get=function(t,e){if(t in this)return this[t];if(t in this._local)return this._local[t];if(e)return null;throw new Error("invalid property requested: '"+t+"'")};var h=P.Color=function(t){if(Array.isArray(t))return this.r=t[0],this.g=t[1],this.b=t[2],void(this.a=void 0!==t[3]?t[3]:255);if("string"!=typeof t)return this.r=this.b=this.a=255,this.g=0,void log("invalid color specification: "+t,(new Error).stack);var e;if("#"===t[0])e=t.substring(1);else{if("rgba"===t.substring(0,4)){var i=t.indexOf("("),n=t.lastIndexOf(")");return t=t.substring(i+1,n).split(","),this.r=parseInt(t[0],10),this.g=parseInt(t[1],10),this.b=parseInt(t[2],10),void(this.a=Math.floor(255*parseFloat(t[3])))}e=c[t]}if(!e)return this.r=this.b=this.a=255,this.g=0,void log("invalid color specification: "+t,(new Error).stack);var o=e.length;if(3===o||4===o){var r=parseInt(e[0],16),a=parseInt(e[1],16),i=parseInt(e[2],16),s=4===o?parseInt(e[3],16):15;this.r=r<<4|r,this.g=a<<4|a,this.b=i<<4|i,this.a=s<<4|s}else{if(6!==o&&8!==o)throw new Error("invalid color specification: "+t);this.r=parseInt(e.substring(0,2),16),this.g=parseInt(e.substring(2,4),16),this.b=parseInt(e.substring(4,6),16),this.a=8===o?parseInt(e.substring(6,8),16):255}};h.interpolate=function(t,e,i){t instanceof h||(t=new h(t)),e instanceof h||(e=new h(e));function n(t,e,i){return Math.floor(i*(t-e)+e)}var o=n(t.r,e.r,i),r=n(t.g,e.g,i),a=n(t.b,e.b,i),s=n(t.a,e.a,i);return new h([o,r,a,s])},h.normalize=function(t){return t instanceof h?t:new h(t)};var o=h.prototype;o.constructor=P.Color,o.rgba=o.toString=function(){var t=this.a;return 255==t?"rgb("+this.r+","+this.g+","+this.b+")":"rgba("+this.r+","+this.g+","+this.b+","+t/255+")"};function r(t){var e=t>>4&15,i=15&t;return e+=9<e?87:48,i+=9<i?87:48,String.fromCharCode(e,i)}o.hex=function(){return"#"+r(this.r)+r(this.g)+r(this.b)+r(this.a)},o.ahex=function(){return"#"+r(this.a)+r(this.r)+r(this.g)+r(this.b)},i.addLazyProperty=function(e,n,o){function i(t){var e=t.__properties,i=e[n];return void 0!==i?(void 0===i.value&&(i.value=o(t)),i):e[n]=new a(o(t))}Object.defineProperty(e,n,{get:function(){return i(this).value},set:function(t){if(!i(this).forwardSet(this,n,t,null))throw new Error("could not set lazy property "+n+" in "+e.componentName)},enumerable:!0})},i.addConstProperty=function(t,e,i){Object.defineProperty(t,e,{get:function(){return i.call(this)},set:function(t){throw new Error("could not set const property")},enumerable:!0})};var a=function(t){this.value=t,this.onChanged=[]},s=(i.PropertyStorage=a).prototype;s.getAnimation=function(t,e){var i=this.animation;return i&&i.enabled()&&!i._native&&i._context._completed?i:null},s.__removeUpdater=function(t){for(var e=this.deps,i=0,n=e.length;i<n;i+=2){var o=e[i],r=e[i+1];o.removeOnChanged(r,t)}},s.removeUpdater=function(){var t=this.callback;void 0!==t&&(this.__removeUpdater(t),this.deps=this.callback=void 0)},s.replaceUpdater=function(t,e,i){var n=this.callback;void 0!==n&&this.__removeUpdater(n),this.callback=e,this.deps=i;for(var o=t.connectOnChanged,r=0,a=i.length;r<a;r+=2){var s=i[r],c=i[r+1];o.call(t,s,c,e)}e()},s.forwardSet=function(n,o,t,e){var i,r=this.getCurrentValue(e);if(null!==r&&r instanceof Object){if(void 0===(i=r.defaultProperty))return!1;var a=r[i];return t!==a&&(r[i]=t,this.callOnChanged(n,o,t,a)),!0}if(t instanceof Object)return void 0===(i=t.defaultProperty)||n.connectOnChanged(t,i,function(t,e){var i=n.__properties[o];void 0!==i&&i.callOnChanged(n,o,t,e)}),!1},s.discard=function(){var t=this.getAnimation();t&&t.complete(),this.onChanged=[]},s.getSimpleValue=function(t){var e=this.value;return void 0!==e?e:t},s.getCurrentValue=function(t){var e=this.interpolatedValue;return void 0!==e?e:this.getSimpleValue(t)},s.setCurrentValue=function(t,e,i,n,o){var r=this.value;this.interpolatedValue=void 0,this.value=i,o&&this.callOnChanged(t,e,i,r)},s.set=function(t,e,i,n,o){var r=this.value;void 0===r&&(r=n),r!==i&&(this.forwardSet(t,e,i,n)||(this.value=i,o&&this.callOnChanged(t,e,i,r)))};function l(t,e,i,n){var o,r=t["__changed__"+e],a=void 0!==r,s=void 0!==n;(a||s)&&(o=P.safeCall(t,[i],function(t){log("on "+e+" changed callback failed: ",t,t.stack)}),a&&r.forEach(o),s&&n.forEach(o))}s.callOnChanged=function(t,e,i){l(t,e,i,this.onChanged)},s.removeOnChanged=function(t){var e=this.onChanged,i=e.indexOf(t);if(0<=i)return e.splice(i,1)};var g=i.getDefaultValueForType=function(t){switch(t){case"enum":case"int":return 0;case"bool":return!1;case"real":return 0;case"string":return"";case"array":return[];case"color":case"Color":return"#0000";default:return t[0].toUpperCase()===t[0]?null:void 0}},_=(i.convertTo=function(t,e){switch(t){case"enum":case"int":return~~e;case"bool":return!!e;case"real":return+e;case"string":return String(e);default:return e}},i.getConvertFunction=function(t){switch(t){case"enum":case"int":return function(t){return~~t};case"bool":return function(t){return!!t};case"real":return function(t){return+t};case"string":return function(t){return String(t)};default:return function(t){return t}}});i.addProperty=function(t,e,d,p){var u=_(e),i=function(t){switch(t){case"int":case"real":case"color":case"Color":return!0;default:return!1}}(e);p=void 0!==p?u(p):g(e);function f(t){var e=this.__properties,i=e[d];if(void 0===i){if(t===p)return;i=e[d]=new a(p)}return i}Object.defineProperty(t,d,{get:i?function(){var t=this.__properties[d];return void 0!==t?t.getCurrentValue(p):p}:function(){var t=this.__properties[d];return void 0!==t?t.getSimpleValue(p):p},set:i?function(t){t=u(t);var e,i,n,o,r,a,s,c,h,l=f.call(this,t);void 0!==l&&((e=l.getAnimation())&&l.value!==t&&(i=this._context,n=i.backend,l.frameRequest&&n.cancelAnimationFrame(l.frameRequest),l.started=Date.now(),o=l.getCurrentValue(p),r=t,a=this,s=function(){l.frameRequest&&(n.cancelAnimationFrame(l.frameRequest),l.frameRequest=void 0),e.complete=function(){},l.interpolatedValue=void 0,l.started=void 0,e.running=!1,l.callOnChanged(a,d,r,o)},c=e.duration,h=i.wrapNativeCallback(function(){var t=(Date.now()-l.started)/c;1<=t||!e.active()?s():(l.interpolatedValue=u(e.interpolate(r,o,t)),l.callOnChanged(a,d,l.getCurrentValue(p),o),l.frameRequest=n.requestAnimationFrame(h))}),l.frameRequest=n.requestAnimationFrame(h),e.running=!0,e.complete=s),l.set(this,d,t,p,!e))}:function(t){t=u(t);var e=f.call(this,t);void 0!==e&&e.set(this,d,t,p,!0)},enumerable:!0})},i.addAliasProperty=function(i,n,t,e){var o=t();i.connectOnChanged(o,e,function(t){var e=i.__properties[n];void 0!==e?e.callOnChanged(i,n,t):l(i,n,t)}),Object.defineProperty(i,n,{get:function(){return o[e]},set:function(t){o[e]=t},enumerable:!0})},P.createSignal=function(t){return function(){this.emitWithArgs(t,arguments)}},P.createSignalForwarder=function(t,e){return function(){t.emitWithArgs(e,arguments)}},P.EventBinder=function(t){this.target=t,this.callbacks={},this.enabled=!1},P.EventBinder.prototype.on=function(t,e){if(t in this.callbacks)throw new Error("double adding of event ("+t+")");this.callbacks[t]=e,this.enabled&&this.target.on(t,e)},P.EventBinder.prototype.constructor=P.EventBinder,P.EventBinder.prototype.enable=function(t){if(t!=this.enabled){var e=this.target;if(this.enabled=t)for(var i in this.callbacks)e.on(i,this.callbacks[i]);else for(var i in this.callbacks)e.removeListener(i,this.callbacks[i])}};function d(t,e,i,n){var o,r=t+i,a=e[r];void 0!==a?e.hasOwnProperty(r)?a.push(n):((o=a.slice()).push(n),e[r]=o):e[r]=[n]}P._protoOn=function(t,e,i){d("__on__",t,e,i)},P._protoOnChanged=function(t,e,i){d("__changed__",t,e,i)},P._protoOnKey=function(t,e,i){d("__key__",t,e,i)};function p(t){this._callback=t,this._queue=[],this.history=[]}var u=p.prototype;return u.constructor=p,u.unshift=function(){var t=this._queue;t.unshift.apply(t,arguments)},u.push=function(){var t=this._queue;t.push.apply(t,arguments)},u.enumerate=function(t,e){var i=[this,e],n=this._queue;for(n.unshift(t);n.length;){var o=n.shift();if(this.history.push(o),this._callback.apply(o,i))break}},i.forEach=function(t,e,i){return new p(e).enumerate(t,i),i},i.createObject=function(t){t.__init();var e=t.parent;"_updateVisibilityForChild"in e&&e._updateVisibilityForChild(t,e.recursiveVisible),"_tryFocus"in e&&e._tryFocus(),t._context.scheduleComplete()},i}();var y=k.core.core,n=P.CoreObject,e=n.prototype,c=P.EventEmitter=function(t,e){n.apply(this,arguments),this._eventHandlers={},this._onConnections=[]},h=c.prototype=Object.create(e);h.constructor=c,h.componentName="core.EventEmitter",h.discard=function(){for(var t in this.removeAllOn(),this._eventHandlers)this.removeAllListeners(t)},h.removeAllOn=function(){for(var t=this._onConnections,e=0,i=t.length;e<i;e+=3)t[e].removeListener(t[e+1],t[e+2]);this._onConnections=[]},h.removeAllListeners=function(t){delete this._eventHandlers[t]},h.emit=function(e){if(""===e)throw new Error("empty listener name");var t=this["__on__"+e],i=this._eventHandlers[e];if(void 0!==t||void 0!==i){for(var n=arguments.length,o=new Array(n-1),r=0,a=1;a<n;)o[r++]=arguments[a++];var s=P.safeCall(this,o,function(t){log("event/signal "+e+" handler failed:",t,t.stack)});void 0!==t&&t.forEach(s),void 0!==i&&i.forEach(s)}},h.emitWithArgs=function(e,t){if(""===e)throw new Error("empty listener name");var i,n=this["__on__"+e],o=this._eventHandlers[e];void 0===n&&void 0===o||(i=P.safeCall(this,t,function(t){log("event/signal "+e+" handler failed:",t,t.stack)}),void 0!==n&&n.forEach(i),void 0!==o&&o.forEach(i))},h.removeListener=function(t,e){var i,n;t in this._eventHandlers&&null!=e&&""!==t?(0<=(n=(i=this._eventHandlers[t]).indexOf(e))?i.splice(n,1):$manifest$trace$listeners&&log("failed to remove listener for",t,"from",this),i.length||this.removeAllListeners(t)):$manifest$trace$listeners&&log("invalid removeListener("+t+", "+e+") invocation",(new Error).stack)},h.on=function(t,e){if(""===t)throw new Error("empty listener name");var i=this._eventHandlers,n=i[t];void 0!==n?n.push(e):i[t]=[e]},h.connectOn=function(t,e,i){t.on(e,i),this._onConnections.push(t,e,i)},h.$c=function(t){e.$c.call(this,t.$b={})},h.$s=function(t){e.$s.call(this,t.$b),delete t.$b,this.completed()};var l=P.EventEmitter,d=l.prototype,p=P.Object=function(t,e){l.apply(this,arguments),this.parent=t,this.children=[],this.__properties={},this.__attachedObjects=[],t&&t.__attachedObjects.push(this);var i;this._context=t?t._context:null;e&&((i=this._local).model=e,i._delegate=this),this._changedConnections=[],this._properties={}},u=p.prototype=Object.create(d);u._propertyToStyle={width:"width",height:"height",x:"left",y:"top",viewX:"left",viewY:"top",opacity:"opacity",border:"border",radius:"border-radius",rotate:"transform",boxshadow:"box-shadow",transform:"transform",visible:"visibility",visibleInView:"visibility",background:"background",color:"color",backgroundImage:"background-image",font:"font"},u.constructor=p,u.componentName="core.Object",u.completed=function(){this.__complete!==P.CoreObject.prototype.__complete&&this._registerDelayedAction("complete")&&this._context.__onCompleted(this)},u.discard=function(){this.removeAllOnChanged();var t=this.__attachedObjects;this.__attachedObjects=[],t.forEach(function(t){t.discard()});var e,i=this.parent;!i||0<=(e=i.__attachedObjects.indexOf(this))&&i.__attachedObjects.splice(e,1),this.children=[],this.parent=null,this._local={};var n=this.__properties;for(var o in n)n[o].discard();this._properties={},P.EventEmitter.prototype.discard.apply(this)},u.removeAllOnChanged=function(){for(var t=this._changedConnections,e=0,i=t.length;e<i;e+=3)t[e].removeOnChanged(t[e+1],t[e+2]);this._changedConnections=[]},u.getComponentPath=function(){for(var t=[],e=this;e;){var i,n=e.componentName;!e.parent||0<=(i=e.parent.children.indexOf(e))&&(n+="@"+i),t.unshift(n),e=e.parent}return t.join(" → ")},u._tryFocus=function(){return!1},u.addChild=function(t){this.children.push(t)},u.removeChild=function(t){var e=this.children,i=e.indexOf(t);0<=i&&e.splice(i,1)},u._cancelDelayedAction=function(t){this._registeredDelayedActions[t]=!1},u._setId=function(t){for(var e=this;e;)e._local[t]=this,e=e.parent},u._registerDelayedAction=function(t){var e=this._registeredDelayedActions;return void 0===e&&(e=this._registeredDelayedActions={}),!0!==e[t]&&(e[t]=!0)},u.resetAnimation=function(t){var e,i,n=this.__properties[t];void 0!==n&&n.animation&&((e=n.animation).disable(),i=e.target,e.target=i,n.animation=null,e.enable(),e.target=i)},u._removeUpdater=function(t){var e=this.__properties[t];void 0!==e&&e.removeUpdater()},u.updateAnimation=function(t,e){this._context.backend.setAnimation(this,t,e)},u.setAnimation=function(t,e){this._get("context",!0);if(!$manifest$disableAnimations){if(null===e)return this.resetAnimation(t);var i=this._context.backend;"contentX"!==t&&"contentY"!==t||log("WARNING: you're trying to animate contentX/contentY property, this will always use animation frames, ignoring CSS transitions, please use content.x/content.y instead"),e.target=this,e.property=t,this._createPropertyStorage(t).animation=e,i.setAnimation(this,t,e)&&(e._native=!0)}},u.removeOnChanged=function(t,e){var i,n=this.__properties[t];void 0!==n&&(i=n.removeOnChanged(e)),$manifest$trace$listeners&&!i&&log("failed to remove changed listener for",t,"from",this)},u.onChanged=function(t,e){this._createPropertyStorage(t).onChanged.push(e)},u._replaceUpdater=function(t,e,i){this._createPropertyStorage(t).replaceUpdater(this,e,i)},u._setProperty=function(t,e){var i=this._createPropertyStorage(t,e),n=i.animation;void 0!==n&&n.disable(),i.setCurrentValue(this,null,e),void 0!==n&&n.enable()},u._createPropertyStorage=function(t,e){var i=this.__properties[t];return void 0!==i?i:this.__properties[t]=new P.core.PropertyStorage(e)},u.connectOnChanged=function(t,e,i){t.onChanged(e,i),this._changedConnections.push(t,e,i)},u.$c=function(t){d.$c.call(this,t.$b={})},u.$s=function(t){d.$s.call(this,t.$b),delete t.$b,this.completed()};var f=P.Object,g=f.prototype,_=i.Rest=function(t,e){f.apply(this,arguments),this._methods={}},m=_.prototype=Object.create(g);m.constructor=_,m.componentName="controls.web.api.Rest",m.internetConnectionLost=P.createSignal("internetConnectionLost"),m.error=P.createSignal("error"),y.addProperty(m,"string","baseUrl"),m.args=function(t){return t},m.headers=function(t){},m.call=function(t,e,i,n,o,r){var a;t.indexOf("://")<0&&(t="/"===(a=this.baseUrl)[a.length-1]||"/"===t[0]?a+t:a+"/"+t),this._call(t,e,i,n,JSON.stringify(o),r)},m._call=function(t,n,o,r,e,i){var a=this._get("apiRequest",!0),s=i||{};e&&(e=this.args(e),s["Content-Type"]="application/json");var c=this.headers(s);void 0!==c&&(s=c);var h=t,l=this;a.ajax({method:r||"GET",headers:s,contentType:"application/json",url:h,data:e,done:function(e){if(e.target&&400<=e.target.status)return log("Error in request",e),o&&o(e),void l.error({url:h,method:r,response:e});var i=e.target.responseText;if(i){try{e=JSON.parse(i)}catch(t){e=i}n(e)}else n("")},error:function(t){o&&o(t),l.error({url:h,method:r,response:t})}})},m._registerMethod=function(t,e){var i=this._get("api",!0);t&&((i=this)[t]=function(){e.call(i,arguments)})},P._protoOn(m,"error",function(t,e,i){("undefined"!=typeof window&&!window.navigator.onLine||i&&i.target&&0===i.target.status&&""===i.target.response)&&this.internetConnectionLost({url:t,method:e,response:i})}),m.$c=function(t){g.$c.call(this,t.$b={});var e=new P.Request(this);(t._this$child0=e).$c(t.$c$_this$child0={}),e._setId("apiRequest"),this.addChild(e)},m.$s=function(t){g.$s.call(this,t.$b),delete t.$b;var e=t._this$child0;e.$s(t.$c$_this$child0),delete t.$c$_this$child0,e.completed(),this.completed()};var b=i.Rest,$=b.prototype,w=s.AppApi=function(t,e){b.apply(this,arguments)},x=w.prototype=Object.create($);x.constructor=w,x.componentName="src.AppApi",y.addProperty(x,"string","apiKey","a20b12b279f744f2b3c7b5c5400c4eb5"),x.$c=function(t){$.$c.call(this,t.$b={});var e=new i.Method(this);(t._this$child0=e).$c(t.$c$_this$child0={}),this.addChild(e)},x.$s=function(t){$.$s.call(this,t.$b),delete t.$b,this._removeUpdater("baseUrl"),this.baseUrl="https://api.start.ru";var e=t._this$child0;e.$s(t.$c$_this$child0),delete t.$c$_this$child0,e._replaceUpdater("path",function(){e.path="/web/main?apikey="+e.parent.apiKey},[e.parent,"apiKey"]),e._removeUpdater("name"),e.name="getMain",e.completed(),this.completed()};var C=P.Object,A=C.prototype,O=P.System=function(t,e){C.apply(this,arguments),this.vendor=P.vendor,this.device=P.device,this.os=P.os,this.browser=P.browser,this.userAgent=P.userAgent,this.language=P.language;var i=this._context;i.language=this.language.replace("-","_"),this.webkit=0<=this.userAgent.toLowerCase().indexOf("webkit"),this.support3dTransforms=i.backend.capabilities.csstransforms3d||!1,this.supportTransforms=i.backend.capabilities.csstransforms||!1,this.supportTransitions=i.backend.capabilities.csstransitions||!1,this.resolutionWidth=$manifest$resolutionWidth,this.resolutionHeight=$manifest$resolutionHeight},S=O.prototype=Object.create(A);S.constructor=O,S.componentName="core.System",y.addProperty(S,"string","userAgent"),y.addProperty(S,"string","language"),y.addProperty(S,"string","browser"),y.addProperty(S,"string","vendor"),y.addProperty(S,"string","os"),y.addProperty(S,"bool","webkit"),y.addProperty(S,"bool","support3dTransforms"),y.addProperty(S,"bool","supportTransforms"),y.addProperty(S,"bool","supportTransitions"),y.addProperty(S,"bool","portrait"),y.addProperty(S,"bool","landscape"),y.addProperty(S,"bool","pageActive",!0),y.addProperty(S,"int","screenWidth"),y.addProperty(S,"int","screenHeight"),y.addProperty(S,"int","contextWidth"),y.addProperty(S,"int","contextHeight"),y.addProperty(S,"int","resolutionWidth"),y.addProperty(S,"int","resolutionHeight"),y.addProperty(S,"bool","virtualKeyboard"),S.Desktop=0,O.Desktop=0,S.Tv=1,O.Tv=1,S.Mobile=2,O.Mobile=2,y.addProperty(S,"enum","device"),S.MobileS=0,O.MobileS=0,S.MobileM=1,O.MobileM=1,S.MobileL=2,O.MobileL=2,S.Tablet=3,O.Tablet=3,S.Laptop=4,O.Laptop=4,S.LaptopL=5,O.LaptopL=5,S.Laptop4K=6,O.Laptop4K=6,y.addProperty(S,"enum","layoutType"),S._updateLayoutType=function(){var t;this.contextWidth&&this.contextHeight&&((t=this.contextWidth)<=320?this.layoutType=this.MobileS:t<=375?this.layoutType=this.MobileM:t<=425?this.layoutType=this.MobileL:t<=768?this.layoutType=this.Tablet:this.contextWidth<=1024?this.layoutType=this.Laptop:this.contextWidth<=1440?this.layoutType=this.LaptopL:this.layoutType=this.Laptop4K)};var I=function(t){this._updateLayoutType()};P._protoOnChanged(S,"contextHeight",I),P._protoOnChanged(S,"contextWidth",I),S.$c=function(t){A.$c.call(this,t.$b={})},S.$s=function(t){var e=this;A.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("portrait",function(){e.portrait=e.parent.width<e.parent.height},[e.parent,"height",e.parent,"width"]),e._replaceUpdater("contextWidth",function(){e.contextWidth=e._context.width},[e._context,"width"]),e._replaceUpdater("virtualKeyboard",function(){e.virtualKeyboard=e.device===k.core.System.prototype.Tv||e.device===k.core.System.prototype.Mobile},[e,"device"]),e._replaceUpdater("landscape",function(){e.landscape=!e.portrait},[e,"portrait"]),e._replaceUpdater("contextHeight",function(){e.contextHeight=e._context.height},[e._context,"height"]),e.completed()};var T=P.Object,U=T.prototype,E=P.Shadow=function(t,e){T.apply(this,arguments)},L=E.prototype=Object.create(U);L.constructor=E,L.componentName="core.Shadow",y.addProperty(L,"real","x"),y.addProperty(L,"real","y"),y.addProperty(L,"color","color","black"),y.addProperty(L,"real","blur"),y.addProperty(L,"real","spread"),L._empty=function(){return!(this.x||this.y||this.blur||this.spread)},L._getFilterStyle=function(){var t=this.x+"px "+this.y+"px "+this.blur+"px ";return 0<this.spread&&(t+=this.spread+"px "),t+=P.Color.normalize(this.color)};I=function(t){this.parent._updateStyle(!0)};P._protoOnChanged(L,"x",I),P._protoOnChanged(L,"spread",I),P._protoOnChanged(L,"y",I),P._protoOnChanged(L,"blur",I),P._protoOnChanged(L,"color",I),L.$c=function(t){U.$c.call(this,t.$b={})},L.$s=function(t){U.$s.call(this,t.$b),delete t.$b,this.completed()};var z=P.Object,M=z.prototype,R=P.Item=function(t,e){if(z.apply(this,arguments),this._pressedHandlers={},this._topPadding=0,t){if(this.element)throw new Error("double ctor call");this._createElement(this.getTag(),this.getClass())}},H=R.prototype=Object.create(M);H.constructor=R,H.componentName="core.Item",H.anchorsMarginsUpdated=P.createSignal("anchorsMarginsUpdated"),H.newBoundingBox=P.createSignal("newBoundingBox"),y.addProperty(H,"int","x"),y.addProperty(H,"int","y"),y.addProperty(H,"int","z"),y.addProperty(H,"int","width"),y.addProperty(H,"int","height"),y.addProperty(H,"bool","clip"),y.addLazyProperty(H,"radius",function(t,e){var i=new P.Radius(t,e),n={lazy$radius:i};return i.$c(n.$c$lazy$radius={}),(i=n.lazy$radius).$s(n.$c$lazy$radius),delete n.$c$lazy$radius,i.completed(),i}),y.addProperty(H,"bool","focus"),y.addProperty(H,"bool","focused"),y.addProperty(H,"bool","activeFocus"),y.addProperty(H,"Item","focusedChild"),y.addProperty(H,"bool","visible",!0),y.addProperty(H,"bool","visibleInView",!0),y.addProperty(H,"bool","recursiveVisible",!1),y.addProperty(H,"real","opacity",1),y.addLazyProperty(H,"anchors",function(t,e){var i=new P.Anchors(t,e),n={lazy$anchors:i};return i.$c(n.$c$lazy$anchors={}),(i=n.lazy$anchors).$s(n.$c$lazy$anchors),delete n.$c$lazy$anchors,i.completed(),i}),y.addLazyProperty(H,"effects",function(t,e){var i=new P.Effects(t,e),n={lazy$effects:i};return i.$c(n.$c$lazy$effects={}),(i=n.lazy$effects).$s(n.$c$lazy$effects),delete n.$c$lazy$effects,i.completed(),i}),y.addLazyProperty(H,"transform",function(t,e){var i=new P.Transform(t,e),n={lazy$transform:i};return i.$c(n.$c$lazy$transform={}),(i=n.lazy$transform).$s(n.$c$lazy$transform),delete n.$c$lazy$transform,i.completed(),i}),y.addProperty(H,"bool","cssTranslatePositioning"),y.addProperty(H,"bool","cssNullTranslate3D"),y.addProperty(H,"bool","cssDelegateAlwaysVisibleOnAcceleratedSurfaces",!0),y.addProperty(H,"bool","cssPointerTouchEvents",!1),y.addConstProperty(H,"left",function(){return[this,0]}),y.addConstProperty(H,"top",function(){return[this,1]}),y.addConstProperty(H,"right",function(){return[this,2]}),y.addConstProperty(H,"bottom",function(){return[this,3]}),y.addConstProperty(H,"horizontalCenter",function(){return[this,4]}),y.addConstProperty(H,"verticalCenter",function(){return[this,5]}),y.addProperty(H,"int","viewX"),y.addProperty(H,"int","viewY"),y.addProperty(H,"int","keyProcessDelay"),H.discard=function(){P.Object.prototype.discard.apply(this),this.focusedChild=null,this._pressedHandlers={},this.element&&this.element.discard()},H._tryFocus=function(){if(!this.visible)return!1;if(this.focusedChild&&this.focusedChild._tryFocus())return!0;for(var t=this.children,e=0;e<t.length;++e){var i=t[e];if(i._tryFocus())return this._focusChild(i),!0}return this.focus},H.setFocus=function(){this.forceActiveFocus()},H._updateStyle=function(){var t=this.element;t&&t.updateStyle()},H.toScreen=function(){for(var t,e=this,i=0,n=0,o=this.width+(this._borderWidthAdjust||0)+(this._borderInnerWidthAdjust||0),r=this.height+(this._borderHeightAdjust||0)+(this._borderInnerHeightAdjust||0);e;){i+=e.x+e.viewX+(e._borderXAdjust||0),n+=e.y+e.viewY+(e._borderYAdjust||0),e.hasOwnProperty("view")&&(i+=(t=e.view.content).x,n+=t.y),e=e.parent}return[i,n,i+o,n+r,i+o/2,n+r/2]},H.hasActiveFocus=function(){for(var t=this;t.parent;){if(t.parent.focusedChild!=t)return!1;t=t.parent}return!0},H.forceActiveFocus=function(){for(var t=this;t.parent;)t.parent._focusChild(t),t=t.parent;this._tryFocus()&&this._propagateFocusToParents()},H._propagateFocusToParents=function(){for(var t=this;t.parent&&(!t.parent.focusedChild||!t.parent.focusedChild.visible);)t.parent._focusChild(t),t=t.parent},H._updateVisibility=function(){var t,e=this.visible&&this.visibleInView,i=!0,n=this.view;void 0===n||(t=n.content).cssDelegateAlwaysVisibleOnAcceleratedSurfaces&&(t.cssTranslatePositioning||t.cssNullTranslate3D)&&!$manifest$cssDisableTransformations&&(i=!1),i&&this.style("visibility",e?"inherit":"hidden"),this.recursiveVisible=e&&(null===this.parent||this.parent.recursiveVisible)},H._setSizeAdjust=function(){var t=this.x+this.viewX+(this._borderXAdjust||0),e=this.y+this.viewY+(this._borderYAdjust||0);this.cssTranslatePositioning&&!$manifest$cssDisableTransformations?(this.transform.translateX=t,this.transform.translateY=e):(this.style("left",t),this.style("top",e)),this.newBoundingBox()},H.getClass=function(){return""},H.getTag=function(){return"div"},H._focusTree=function(t){this.activeFocus=t,this.focusedChild&&this.focusedChild._focusTree(t)},H.addChild=function(t){P.Object.prototype.addChild.apply(this,arguments),t._tryFocus()&&t._propagateFocusToParents()},H._focusChild=function(t){if(t.parent!==this)throw new Error("invalid object passed as child");this.focusedChild!==t&&(this.focusedChild&&(this.focusedChild._focusTree(!1),this.focusedChild.focused=!1),this.focusedChild=t,this.focusedChild&&(this.focusedChild._focusTree(this.hasActiveFocus()),this.focusedChild.focused=!0))},H.focusChild=function(t){this._propagateFocusToParents(),this._focusChild(t)},H._updateVisibilityForChild=function(t,e){t.recursiveVisible=e&&t.visible&&t.visibleInView},H._attachElement=function(t){this.element&&this.element.discard(),this.element=t;var e=this.parent;e&&e.element.append(t)},H._processKey=function(e,t){$manifest$trace$keys&&log(this.getComponentPath(),"_processKey",e,t);var i=t.timeStamp;if(this.keyProcessDelay){if(this._lastEvent&&i>this._lastEvent&&i-this._lastEvent<this.keyProcessDelay)return!0;this._lastEvent=i}var n=P.safeCall(this,[e,t],function(t){log("on "+e+" handler failed:",t,t.stack)}),o=this["__key__"+e];if(e in this._pressedHandlers&&this.invokeKeyHandlers(e,t,this._pressedHandlers[e],n))return!0;if(o&&this.invokeKeyHandlers(e,t,o,n))return!0;o=this.__key__Key;return!!("Key"in this._pressedHandlers&&this.invokeKeyHandlers(e,t,this._pressedHandlers.Key,n))||!(!o||!this.invokeKeyHandlers(e,t,o,n))},H.invokeKeyHandlers=function(t,e,i,n){for(var o=i.length-1;0<=o;--o){if(n(i[o]))return $manifest$trace$keys&&log("key "+t+" handled in "+(performance.now()-e.timeStamp).toFixed(3)+" ms by",this,(new Error).stack),!0}return!1},H.onPressed=function(t,i){this._get("key",!0);var e="Key"!=t?function(t,e){return e.accepted=!0,i(t,e),e.accepted}:i;t in this._pressedHandlers?this._pressedHandlers[t].push(e):this._pressedHandlers[t]=[e]},H.style=function(t,e){var i=this.element;if(i)return i.style(t,e);log("WARNING: style skipped:",t,e)},H._enqueueNextChildInFocusChain=function(t,e){this._tryFocus();var i=this.focusedChild;i&&i.visible&&(t.unshift(i),e.unshift(i))},H.registerStyle=function(t,e){var i="position: absolute; visibility: inherit; opacity: 1.0;";i+="border-style: solid; border-width: 0px; border-radius: 0px; box-sizing: border-box; border-color: rgba(0,0,0,1);",i+="white-space: nowrap; transform: none;",i+="left: 0px; top: 0px; width: 0px; height: 0px;",i+="font-family: "+$manifest$style$font$family+"; line-height: "+$manifest$style$font$lineHeight+"; ",i+="pointer-events: none; touch-action: none; ",$manifest$style$font$pixelSize?i+="font-size: "+$manifest$style$font$pixelSize+"px; ":$manifest$style$font$pointSize&&(i+="font-size: "+$manifest$style$font$pointSize+"pt; "),t.addRule(e,i)},H._createElement=function(t,e){var i=this._get("context",!0);null===(i=this._context)&&(i=this),i.registerStyle(this,t,e),this._attachElement(i.createElement(t,e))},P._protoOnChanged(H,"cssNullTranslate3D",function(t){$manifest$cssDisableTransformations||this.style("transform",t?"translateZ(0)":"")}),P._protoOnChanged(H,"focus",function(t){this.parent&&this.parent._tryFocus()}),P._protoOnChanged(H,"height",function(t){this.style("height",t-this._topPadding+(this._borderHeightAdjust||0)),this.newBoundingBox()}),P._protoOnChanged(H,"width",function(t){this.style("width",t+(this._borderWidthAdjust||0)),this.newBoundingBox()}),P._protoOnChanged(H,"recursiveVisible",function(t){for(var e=this.children,i=0,n=e.length;i<n;++i){var o=e[i];this._updateVisibilityForChild(o,t)}!t&&this.parent&&this.parent._tryFocus(),$manifest$requireExplicitRecursiveVisibilityStyle&&this.style("-pure-recursive-visibility",t)}),P._protoOnChanged(H,"cssPointerTouchEvents",function(t){var e=t?"auto":"none";this.style("pointer-events",e),this.style("touch-action",e)});I=function(t){var e=this.x+this.viewX;this.cssTranslatePositioning&&!$manifest$cssDisableTransformations?this.transform.translateX=e:this.style("left",e),this.newBoundingBox()};P._protoOnChanged(H,"x",I),P._protoOnChanged(H,"viewX",I);var j=function(t){var e=this.y+this.viewY;this.cssTranslatePositioning&&!$manifest$cssDisableTransformations?this.transform.translateY=e:this.style("top",e),this.newBoundingBox()};P._protoOnChanged(H,"viewY",j),P._protoOnChanged(H,"y",j),P._protoOnChanged(H,"opacity",function(t){this.element&&this.style("opacity",t)});function N(t){this._updateVisibility()}P._protoOnChanged(H,"visible",N),P._protoOnChanged(H,"visibleInView",N),P._protoOnChanged(H,"clip",function(t){this.style("overflow",t?"hidden":"visible")}),P._protoOnChanged(H,"z",function(t){this.style("z-index",t)}),H.$c=function(t){M.$c.call(this,t.$b={})},H.$s=function(t){M.$s.call(this,t.$b),delete t.$b,this.completed()};var B=P.Item,V=B.prototype,W=P.Text=function(t,e){B.apply(this,arguments),this._context.backend.initText(this),0<this.text.length&&this._setText(this.text)},F=W.prototype=Object.create(V);F.constructor=W,F.componentName="core.Text",y.addProperty(F,"string","text"),y.addProperty(F,"color","color"),y.addLazyProperty(F,"shadow",function(t,e){var i=new P.Shadow(t,e),n={lazy$shadow:i};return i.$c(n.$c$lazy$shadow={}),(i=n.lazy$shadow).$s(n.$c$lazy$shadow),delete n.$c$lazy$shadow,i.completed(),i}),y.addLazyProperty(F,"font",function(t,e){var i=new P.Font(t,e),n={lazy$font:i};return i.$c(n.$c$lazy$font={}),(i=n.lazy$font).$s(n.$c$lazy$font),delete n.$c$lazy$font,i.completed(),i}),y.addProperty(F,"int","paintedWidth"),y.addProperty(F,"int","paintedHeight"),F.AlignTop=0,W.AlignTop=0,F.AlignBottom=1,W.AlignBottom=1,F.AlignVCenter=2,W.AlignVCenter=2,y.addProperty(F,"enum","verticalAlignment"),F.Html=0,W.Html=0,F.Text=1,W.Text=1,y.addProperty(F,"enum","textFormat"),F.AlignLeft=0,W.AlignLeft=0,F.AlignRight=1,W.AlignRight=1,F.AlignHCenter=2,W.AlignHCenter=2,F.AlignJustify=3,W.AlignJustify=3,y.addProperty(F,"enum","horizontalAlignment"),F.NoWrap=0,W.NoWrap=0,F.WordWrap=1,W.WordWrap=1,F.WrapAnywhere=2,W.WrapAnywhere=2,F.Wrap=3,W.Wrap=3,y.addProperty(F,"enum","wrapMode"),F._updateSize=function(){this.recursiveVisible&&(this._updateSizeNeeded||this.clip)&&this._scheduleUpdateSize()},F._updateStyle=function(){this.shadow&&!this.shadow._empty()?this.style("text-shadow",this.shadow._getFilterStyle()):this.style("text-shadow",""),P.Item.prototype._updateStyle.apply(this,arguments)},F._updateSizeImpl=function(){if(0===this.text.length)return this.paintedWidth=0,void(this.paintedHeight=0);this._context.backend.layoutText(this)},F._scheduleUpdateSize=function(){this._context.delayedAction("text:update-size",this,this._updateSizeImpl)},F._enableSizeUpdate=function(){this._updateSizeNeeded=!0,this._updateSize()},F._updateWSHandling=function(){var t=this.textFormat===this.Text;switch(this.wrapMode){case this.NoWrap:this.style({"white-space":t?"pre":"nowrap","word-break":""});break;case this.Wrap:case this.WordWrap:this.style({"white-space":t?"pre-wrap":"normal","word-break":""});break;case this.WrapAnywhere:this.style({"white-space":t?"pre-wrap":"normal","word-break":"break-all"})}this._updateSize()},F.getClass=function(){return"core-text"},F._setText=function(t){this._context.backend.setText(this,t)},F.on=function(t,e){this._updateSizeNeeded||"newBoundingBox"===t&&this._enableSizeUpdate(),P.Item.prototype.on.apply(this,arguments)},F.onChanged=function(t,e){if(!this._updateSizeNeeded)switch(t){case"right":case"width":case"bottom":case"height":case"verticalCenter":case"horizontalCenter":this._enableSizeUpdate()}P.Item.prototype.onChanged.apply(this,arguments)},F.registerStyle=function(t,e){t.addRule(e,"width: auto; height: auto;")},P._protoOnChanged(F,"recursiveVisible",function(t){t&&this._updateSize()}),P._protoOnChanged(F,"horizontalAlignment",function(t){switch(t){case this.AlignLeft:this.style("text-align","left");break;case this.AlignRight:this.style("text-align","right");break;case this.AlignHCenter:this.style("text-align","center");break;case this.AlignJustify:this.style("text-align","justify")}}),P._protoOnChanged(F,"verticalAlignment",function(t){if(this._enableSizeUpdate(),$manifest$requireVerticalTextAlignmentStyle)switch(t){case this.AlignTop:this.style("-pure-text-vertical-align","top");break;case this.AlignVCenter:this.style("-pure-text-vertical-align","middle");break;case this.AlignBottom:this.style("-pure-text-vertical-align","bottom")}});I=function(t){this._updateWSHandling()};P._protoOnChanged(F,"wrapMode",I),P._protoOnChanged(F,"textFormat",I),P._protoOnChanged(F,"text",function(t){this._setText(t),this._updateSize()});j=function(t){this._updateSize()};P._protoOnChanged(F,"height",j),P._protoOnChanged(F,"width",j),P._protoOnChanged(F,"color",function(t){this.style("color",P.Color.normalize(t))}),F.$c=function(t){V.$c.call(this,t.$b={})},F.$s=function(t){var e=this;V.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("width",function(){e.width=e.paintedWidth},[e,"paintedWidth"]),e._replaceUpdater("height",function(){e.height=e.paintedHeight},[e,"paintedHeight"]),e.completed()};var D=P.Text,Y=D.prototype,X=v.EllipsisText=function(t,e){D.apply(this,arguments)},q=X.prototype=Object.create(Y);q.constructor=X,q.componentName="controls.web.EllipsisText",y.addProperty(q,"bool","active",!0),q.__complete=function(){Y.__complete.call(this),this.updateStyle()},q.updateStyle=function(){this.style("text-overflow",this.active?"ellipsis":"clip")},P._protoOnChanged(q,"active",function(t){this.updateStyle()}),q.$c=function(t){Y.$c.call(this,t.$b={})},q.$s=function(t){Y.$s.call(this,t.$b),delete t.$b,this._removeUpdater("clip"),this.clip=!0,this.completed()};var G=P.Item,K=G.prototype,Z=P.BaseViewContent=function(t,e){G.apply(this,arguments),this.style("will-change","scroll-position, transform, left, top")},J=Z.prototype=Object.create(K);J.constructor=Z,J.componentName="core.BaseViewContent",J._updateScrollPositions=function(t,e,i){this._setProperty("x",-t),this._setProperty("y",-e),void 0!==i&&!i||this.parent._scheduleLayout()};I=function(t){this.parent._scheduleLayout()};P._protoOnChanged(J,"x",I),P._protoOnChanged(J,"y",I),J.$c=function(t){K.$c.call(this,t.$b={})},J.$s=function(t){K.$s.call(this,t.$b),delete t.$b,this.completed()};var Q=P.Object,tt=Q.prototype,et=P.Animation=function(t,e){Q.apply(this,arguments),this._disabled=0,this._native=!1},it=et.prototype=Object.create(tt);it.constructor=et,it.componentName="core.Animation",y.addProperty(it,"int","delay",0),y.addProperty(it,"int","duration",200),y.addProperty(it,"bool","cssTransition",!0),y.addProperty(it,"bool","running",!1),y.addProperty(it,"string","easing","ease"),y.addProperty(it,"Object","target"),y.addProperty(it,"string","property"),y.addProperty(it,"variant","from"),y.addProperty(it,"variant","to"),it._updateAnimation=function(){this.target&&this.target.updateAnimation(this.property,this)},it.active=function(){return this.enabled()&&0<this.duration},it.disable=function(){++this._disabled,this._updateAnimation()},it.enable=function(){--this._disabled,this._updateAnimation()},it.enabled=function(){return 0===this._disabled},it.complete=function(){},it.interpolate=function(t,e,i){return i*(t-e)+e};I=function(t){this._updateAnimation()};P._protoOnChanged(it,"easing",I),P._protoOnChanged(it,"duration",I),P._protoOnChanged(it,"delay",I),P._protoOnChanged(it,"cssTransition",I),P._protoOnChanged(it,"running",I),it.$c=function(t){tt.$c.call(this,t.$b={})},it.$s=function(t){tt.$s.call(this,t.$b),delete t.$b,this.completed()};var nt=P.Item,ot=nt.prototype,rt=a.ActivityManager=function(t,e){nt.apply(this,arguments),this._activityStack=[]},at=rt.prototype=Object.create(ot);at.constructor=rt,at.componentName="controls.core.ActivityManager",y.addProperty(at,"int","count"),y.addProperty(at,"bool","keepLastActivity",!0),y.addProperty(at,"string","currentActivity"),at._initTopIntent=function(){if(this._activityStack.length){var t=this._activityStack[this._activityStack.length-1],e=this.children;log("initTopIntent: "+t.name);for(var i=0;i<e.length;++i){var n,o=e[i];o&&o instanceof k.controls.core.BaseActivity&&(o.name===t.name?(log("Init:",t),(n=t.state||{}).lastActivity||(n.lastActivity=this.currentActivity),o.init(t.intent,n),o.index=this._activityStack.length-1,o.start(),o.setFocus(),this.currentActivity=o.name):o.stop())}}else log("Activity stack is empty")},at.initTopIntent=function(){try{this._initTopIntent()}catch(t){log("initTopIntent failed:",t),this.pop()}},at.clear=function(){for(var t=this.children,e=0;e<t.length;++e){var i=t[e];i&&i instanceof k.controls.core.Activity&&i.stop()}this._activityStack=[]},at.pop=function(t){if(this.keepLastActivity&&1<this.count||!this.keepLastActivity&&0<this.count){var e=1,e=void 0===t?1:t>this.count-1&&this.keepLastActivity?this.count-1:t>this.count&&!this.keepLastActivity?this.count:t;return this._activityStack.splice(-e,e),this.count-=e,this.initTopIntent(),!0}return log("No activity to pop"),!1},at.setIntent=function(t,e){var i;e?(i=this.createActivity(e))&&(i.intent=t):this._activityStack[this._activityStack.length-1].intent=t},at.removeActivity=function(t){if(t==this.currentActivity)this.pop();else{for(var e=-1,i=0;i<this._activityStack.length;++i)if(this._activityStack[i].name==t){e=i;break}if(e<0)return void log("Activity",t,"not found");this._activityStack.splice(e,1)}},at.isActivityInStack=function(e){var t=this._activityStack.filter(function(t){return t.name==e});return t&&0<t.length},at.findActivity=function(e){var t=this.children.filter(function(t){return t instanceof k.controls.core.BaseActivity&&t.name==e}),i=null;return t&&t.length&&(i=t[0].getActivity()),i||log("Activity for name",e,"not found"),i},at.createActivity=function(e){var t=this.findActivity(e);if(t)return t;var i=this.children.filter(function(t){return t instanceof k.controls.core.LazyActivity&&t.name==e});return i&&i.length?(t=i[0]).createActivity():(log("Activity for name",e,"not found"),null)},at.closeAllExcept=function(t){var e=this.findActivity(t);e?(this.count=1,this._activityStack=[e]):(log("Activity",t,"not found, close all"),this.count=0,this._activityStack=[]),this.currentActivity!=t&&this.initTopIntent()},at.replaceTopActivity=function(t,e,i){return 0<this.count?(this._activityStack.pop(),this._activityStack.push({name:t,intent:e,state:i}),this.initTopIntent(),!0):(log("No activity to pop"),!1)},at.push=function(t,e,i){this._activityStack.push({name:t,intent:e,state:i}),this.count++,this.initTopIntent()},at.popWithState=function(t){return this.keepLastActivity&&1<this.count||!this.keepLastActivity&&0<this.count?(this._activityStack.pop(),--this.count,this.setState(t),this.initTopIntent(),!0):(log("No activity to pop"),!1)},at.setState=function(t,e){var i;e?(i=this.createActivity(e))&&(i.state=t):this._activityStack[this._activityStack.length-1].state=t},at.$c=function(t){ot.$c.call(this,t.$b={})},at.$s=function(t){ot.$s.call(this,t.$b),delete t.$b,this.completed()};var st=P.Item,ct=st.prototype,ht=P.Loader=function(t,e){st.apply(this,arguments)},lt=ht.prototype=Object.create(ct);lt.constructor=ht,lt.componentName="core.Loader",lt.loaded=P.createSignal("loaded"),y.addProperty(lt,"string","source"),y.addProperty(lt,"Object","item"),lt.discard=function(){this.discardItem(),P.Item.prototype.discard.call(this)},lt.discardItem=function(){var t=this.item;t&&(t.discard(),t=null)},lt._load=function(){var t=this.source;if(t){log("loading "+t+"…");for(var e=t.split("."),i=k;e.length;){if(void 0===(i=i[e.shift()]))throw new Error("unknown component used: "+t)}this.item=new i(this),P.core.createObject(this.item),this.loaded()}},lt.__complete=function(){ct.__complete.call(this),!this.item&&this.source&&this._load()},P._protoOnChanged(lt,"recursiveVisible",function(t){this.item&&this._updateVisibilityForChild(this.item,t)}),P._protoOnChanged(lt,"source",function(t){this.discardItem(),this._load()}),lt.$c=function(t){ct.$c.call(this,t.$b={})},lt.$s=function(t){ct.$s.call(this,t.$b),delete t.$b,this.completed()};var dt=P.Item,pt=dt.prototype,ut=a.BaseActivity=function(t,e){dt.apply(this,arguments)},ft=ut.prototype=Object.create(pt);ft.constructor=ut,ft.componentName="controls.core.BaseActivity",ft.started=P.createSignal("started"),ft.stopped=P.createSignal("stopped"),y.addProperty(ft,"bool","active"),y.addProperty(ft,"string","name"),y.addProperty(ft,"Item","manager"),ft.clear=function(){this.manager.clear()},ft.pop=function(t){this.manager.pop(t)},ft.init=function(t,e){},ft.closeAllExcept=function(t){this.manager.closeAllExcept(t)},ft.removeActivity=function(t){this.manager.removeActivity(t)},ft.push=function(t,e,i){this.manager.push(t,e,i)},ft.replaceTopActivity=function(t,e,i){this.manager.replaceTopActivity(t,e,i)},ft.popWithState=function(t){this.manager.popWithState(t)},ft.setIntent=function(t,e){this.manager.setIntent(t,e)},ft.setState=function(t,e){this.manager.setState(t,e)},P._protoOnKey(ft,"Back",function(t,e){return this.manager.pop(),!0}),ft.$c=function(t){pt.$c.call(this,t.$b={})},ft.$s=function(t){var e=this;pt.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("visible",function(){e.visible=e.active},[e,"active"]),e._removeUpdater("manager"),e.manager=e.parent,e.completed()};var gt=a.BaseActivity,_t=gt.prototype,mt=a.LazyActivity=function(t,e){gt.apply(this,arguments)},vt=mt.prototype=Object.create(_t);vt.constructor=mt,vt.componentName="controls.core.LazyActivity",y.addProperty(vt,"string","component"),vt.init=function(){k.controls.core.BaseActivity.prototype.init.apply(this,arguments);var t=this.createActivity();t&&t.init.apply(t,arguments)},vt.start=function(){this.createActivity().start(),this.visible=!0},vt.stop=function(){this.visible=!1;var t=this.getActivity();t&&t.stop()},vt.getActivity=function(){return this._get("loader",!0).item},vt.createActivity=function(){var t=this._get("loader",!0),e=t.item;if(!e){if(t.source=this.component,((e=t.item).anchors.fill=this)._context._processActions(),e.manager=this.manager,!e)throw new Error("can't create component "+this.component);var i=this;e.on("started",function(){i.started()}),e.on("stopped",function(){i.stopped()})}return t.item},vt.$c=function(t){_t.$c.call(this,t.$b={});var e=new P.Loader(this);(t._this$child0=e).$c(t.$c$_this$child0={}),e._setId("loader"),this.addChild(e)},vt.$s=function(t){var e=this;_t.$s.call(this,t.$b),delete t.$b,e.anchors._replaceUpdater("fill",function(){e.anchors.fill=e.manager},[e,"manager"]);var i=t._this$child0;i.$s(t.$c$_this$child0),delete t.$c$_this$child0,i.anchors._replaceUpdater("fill",function(){i.anchors.fill=i.parent.manager},[i.parent,"manager"]),i.completed(),e.completed()};var yt=P.Object,bt=yt.prototype,$t=P.Radius=function(t,e){yt.apply(this,arguments)},wt=$t.prototype=Object.create(bt);wt.defaultProperty="radius",wt.constructor=$t,wt.componentName="core.Radius",y.addProperty(wt,"real","radius"),y.addProperty(wt,"real","topLeft"),y.addProperty(wt,"real","topRight"),y.addProperty(wt,"real","bottomLeft"),y.addProperty(wt,"real","bottomRight"),wt.__complete=function(){bt.__complete.call(this);var t=this.radius,e=this.topLeft||t,i=this.topRight||t,n=this.bottomLeft||t,o=this.bottomRight||t;e==i&&n==o&&e==n?this.parent.style("border-radius",e):this.parent.style("border-radius",e+"px "+i+"px "+o+"px "+n+"px")};I=function(){log("updating border")};P._protoOn(wt,"bottomLeftUpdate",I),P._protoOn(wt,"radiusUpdate",I),P._protoOn(wt,"bottomRightUpdate",I),P._protoOn(wt,"topLeftUpdate",I),P._protoOn(wt,"topRightUpdate",I),wt.$c=function(t){bt.$c.call(this,t.$b={})},wt.$s=function(t){bt.$s.call(this,t.$b),delete t.$b,this.completed()};var xt=P.Object,Ct=xt.prototype,kt=P.LocalStorage=function(t,e){xt.apply(this,arguments);var i=P.__localStorageBackend;this.impl=i().createLocalStorage(this)},Pt=kt.prototype=Object.create(Ct);Pt.constructor=kt,Pt.componentName="core.LocalStorage",Pt._ensureErrCallback=function(t){return t||function(t){log(t.message)}},Pt._ensureCallback=function(t,e){return t||function(t){log("ignore value of",e,"gotten from storage:",t)}},Pt._checkNameValid=function(t){if(!t)throw new Error("empty name")},Pt.getOrDefault=function(t,e,i){this._checkNameValid(t),e=this._ensureCallback(e,t),this.impl.get(t,e,function(){e(i)},this)},Pt.get=function(t,e,i){this._checkNameValid(t),this.impl.get(t,this._ensureCallback(e,t),this._ensureErrCallback(i),this)},Pt.erase=function(t,e){this._checkNameValid(t),this.impl.erase(t,this._ensureErrCallback(e),this)},Pt.set=function(t,e,i){this._checkNameValid(t),this.impl.set(t,e,this._ensureErrCallback(i),this)},Pt.$c=function(t){Ct.$c.call(this,t.$b={})},Pt.$s=function(t){Ct.$s.call(this,t.$b),delete t.$b,this.completed()};var At=P.LocalStorage,Ot=At.prototype,St=P.PropertyStorage=function(t,e){At.apply(this,arguments)},It=St.prototype=Object.create(Ot);It.constructor=St,It.componentName="core.PropertyStorage",It.ready=P.createSignal("ready"),y.addProperty(It,"string","name"),y.addProperty(It,"string","value"),y.addProperty(It,"string","defaultValue"),It._checkNameValid=function(){if(!this.name)throw new Error("empty property name")},It._write=function(){this._checkNameValid(),this.value?this.set(this.name,this.value):this.erase(this.name)},It._read=function(){this._checkNameValid(),this.getOrDefault(this.name,function(t){this._setProperty("value",t),this.ready()}.bind(this),this.defaultValue)},It.__complete=function(){Ot.__complete.call(this),this.value&&(this._setProperty("value",this.value),this.ready())},P._protoOnChanged(It,"name",function(t){this._setProperty("value",""),this._read()}),P._protoOnChanged(It,"value",function(t){this._write()}),It.$c=function(t){Ot.$c.call(this,t.$b={})},It.$s=function(t){Ot.$s.call(this,t.$b),delete t.$b,this.completed()};var Tt=P.Item,Ut=Tt.prototype,Et=P.BaseLayout=function(t,e){Tt.apply(this,arguments),this.count=0},Lt=Et.prototype=Object.create(Ut);Lt.constructor=Et,Lt.componentName="core.BaseLayout",y.addProperty(Lt,"int","count"),y.addProperty(Lt,"bool","trace"),y.addProperty(Lt,"int","spacing"),y.addProperty(Lt,"int","currentIndex"),y.addProperty(Lt,"int","contentWidth"),y.addProperty(Lt,"int","contentHeight"),y.addProperty(Lt,"bool","keyNavigationWraps"),y.addProperty(Lt,"bool","handleNavigationKeys"),y.addProperty(Lt,"int","layoutDelay"),y.addProperty(Lt,"int","prerenderDelay"),y.addProperty(Lt,"bool","offlineLayout"),Lt._scheduleLayout=function(){(this.recursiveVisible||this.offlineLayout)&&(0<=this.prerenderDelay?(this._context.delayedAction("layout",this,this._doLayoutNP,this.layoutDelay),this._context.delayedAction("prerender",this,this._doLayout,this.prerenderDelay)):this._context.delayedAction("layout",this,this._doLayout,this.layoutDelay))},Lt._doLayout=function(){this._attach(),this._processUpdates(),this._layout()},Lt._doLayoutNP=function(){this._attach(),this._processUpdates(),this._layout(!0)},Lt.__complete=function(){Ut.__complete.call(this),this._scheduleLayout()};I=function(){};Lt._attach=I,Lt._processUpdates=I;j=function(t){this._scheduleLayout()};P._protoOnChanged(Lt,"recursiveVisible",j),P._protoOnChanged(Lt,"spacing",j),Lt.$c=function(t){Ut.$c.call(this,t.$b={})},Lt.$s=function(t){var e=this;Ut.$s.call(this,t.$b),delete t.$b,e._removeUpdater("layoutDelay"),e.layoutDelay=-1,e._removeUpdater("prerenderDelay"),e.prerenderDelay=-1,e.completed()};var zt=P.Object,Mt=zt.prototype,Rt=P.Request=function(t,e){zt.apply(this,arguments)},Ht=Rt.prototype=Object.create(Mt);Ht.constructor=Rt,Ht.componentName="core.Request",y.addProperty(Ht,"bool","loading",!1),Ht.ajax=function(t){t.done&&(t.done=this._context.wrapNativeCallback(t.done)),t.error&&(t.error=this._context.wrapNativeCallback(t.error)),this._context.backend.ajax(this,t)},Ht.$c=function(t){Mt.$c.call(this,t.$b={})},Ht.$s=function(t){Mt.$s.call(this,t.$b),delete t.$b,this.completed()};var jt=P.Object,Nt=jt.prototype,Bt=v.HoverClickMixin=function(t,e){jt.apply(this,arguments),this.element=this.parent.element,this.parent.style("cursor",this.cursor),this._bindClick(this.clickable),this._bindHover(this.enabled),this._bindActiveHover(this.activeHoverEnabled)},Vt=Bt.prototype=Object.create(Nt);Vt.constructor=Bt,Vt.componentName="controls.web.HoverClickMixin",y.addProperty(Vt,"bool","enabled",!0),y.addProperty(Vt,"bool","clickable",!0),y.addProperty(Vt,"bool","activeHoverEnabled",!1),y.addProperty(Vt,"bool","value"),y.addProperty(Vt,"bool","activeHover",!1),y.addProperty(Vt,"string","cursor"),Vt._bindActiveHover=function(t){t&&!this._hmActiveHoverBinder&&(this._hmActiveHoverBinder=new k.core.EventBinder(this.parent.element),this._hmActiveHoverBinder.on("mouseover",function(){this.activeHover=!0}.bind(this)),this._hmActiveHoverBinder.on("mouseout",function(){this.activeHover=!1}.bind(this))),this._hmActiveHoverBinder&&this._hmActiveHoverBinder.enable(t)},Vt._bindClick=function(t){t&&!this._hmClickBinder&&(this._hmClickBinder=new k.core.EventBinder(this.element),this._hmClickBinder.on("click",k.core.createSignalForwarder(this.parent,"clicked").bind(this))),this._hmClickBinder&&this._hmClickBinder.enable(t)},Vt._bindHover=function(t){t&&!this._hmHoverBinder&&(this._hmHoverBinder=new k.core.EventBinder(this.parent.element),this._context.backend.capabilities.mouseEnterLeaveSupported?(this._hmHoverBinder.on("mouseenter",function(){this.value=!0}.bind(this)),this._hmHoverBinder.on("mouseleave",function(){this.value=!1}.bind(this))):(this._hmHoverBinder.on("mouseover",function(){this.value=!0}.bind(this)),this._hmHoverBinder.on("mouseout",function(){this.value=!1}.bind(this)))),this._hmHoverBinder&&this._hmHoverBinder.enable(t)},P._protoOnChanged(Vt,"cursor",function(t){this._get("cursor",!0);this.parent.style("cursor",t)}),P._protoOnChanged(Vt,"activeHoverEnabled",function(t){this._bindActiveHover(t)}),P._protoOnChanged(Vt,"clickable",function(t){this._bindClick(t)}),P._protoOnChanged(Vt,"enabled",function(t){this._bindHover(t)}),Vt.$c=function(t){Nt.$c.call(this,t.$b={})},Vt.$s=function(t){Nt.$s.call(this,t.$b),delete t.$b,this.completed()};var Wt=a.ActivityManager,Ft=Wt.prototype,Dt=s.UiApp=function(t,e){Wt.apply(this,arguments)},Yt=Dt.prototype=Object.create(Ft);Yt.constructor=Dt,Yt.componentName="src.UiApp",y.addProperty(Yt,"int","contextWidth"),y.addProperty(Yt,"int","contextHeight"),Yt.__complete=function(){Ft.__complete.call(this),this.push("mosaic")},Yt.$c=function(t){var e=this;Ft.$c.call(this,t.$b={});var i=new P.Rectangle(e);(t._this$child0=i).$c(t.$c$_this$child0={}),e.addChild(i);var n=new s.AppApi(e);(t._this$child1=n).$c(t.$c$_this$child1={}),n._setId("api"),e.addChild(n);var o=new s.AnotherApi(e);(t._this$child2=o).$c(t.$c$_this$child2={}),o._setId("anotherApi"),e.addChild(o);var r=new a.LazyActivity(e);(t._this$child3=r).$c(t.$c$_this$child3={}),e.addChild(r),e._setId("root")},Yt.$s=function(t){var e=this;Ft.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("contextHeight",function(){e.contextHeight=e._context.height},[e._context,"height"]),e._replaceUpdater("contextWidth",function(){e.contextWidth=e._context.width},[e._context,"width"]),e._removeUpdater("clip"),e.clip=!0,e.anchors._replaceUpdater("fill",function(){e.anchors.fill=e._context},[e,"context"]);var i=t._this$child0;i.$s(t.$c$_this$child0),delete t.$c$_this$child0,i._removeUpdater("color"),i.color="#424242",i.anchors._removeUpdater("fill"),i.anchors.fill=i.parent,i.completed();var n=t._this$child1;n.$s(t.$c$_this$child1),delete t.$c$_this$child1,n.completed();var o=t._this$child2;o.$s(t.$c$_this$child2),delete t.$c$_this$child2,o.completed();var r=t._this$child3;r.$s(t.$c$_this$child3),delete t.$c$_this$child3,r._removeUpdater("component"),r.component="src.MosaicPage",r._removeUpdater("name"),r.name="mosaic",r.completed(),e.completed()};var Xt=P.Object,qt=Xt.prototype,Gt=P.GradientStop=function(t,e){Xt.apply(this,arguments)},Kt=Gt.prototype=Object.create(qt);Kt.constructor=Gt,Kt.componentName="core.GradientStop",y.addProperty(Kt,"real","position"),y.addProperty(Kt,"color","color"),Kt._getDeclaration=function(){return new P.gradient.GradientStop(this.color,this.position)};I=function(t){this.parent._updateStyle()};P._protoOnChanged(Kt,"position",I),P._protoOnChanged(Kt,"color",I),Kt.$c=function(t){qt.$c.call(this,t.$b={})},Kt.$s=function(t){qt.$s.call(this,t.$b),delete t.$b,this.completed()};var Zt=P.Item,Jt=Zt.prototype,Qt=P.VideoPlayer=function(t,e){Zt.apply(this,arguments),this.impl=null,this._createPlayer()},te=Qt.prototype=Object.create(Jt);te.constructor=Qt,te.componentName="core.VideoPlayer",te.text=P.createSignal("text"),te.finished=P.createSignal("finished"),te.error=P.createSignal("error"),y.addProperty(te,"string","backend"),y.addProperty(te,"string","source"),y.addProperty(te,"string","backgroundImage"),y.addProperty(te,"color","backgroundColor","#000"),y.addProperty(te,"float","volume",1),y.addProperty(te,"bool","loop"),y.addProperty(te,"bool","ready"),y.addProperty(te,"bool","muted"),y.addProperty(te,"bool","paused"),y.addProperty(te,"bool","waiting"),y.addProperty(te,"bool","seeking"),y.addProperty(te,"bool","stalled"),y.addProperty(te,"bool","autoPlay"),y.addProperty(te,"real","duration"),y.addProperty(te,"real","progress"),y.addProperty(te,"real","buffered"),y.addProperty(te,"real","startPosition"),te.play=function(){var t;this.source&&(log("play",this.source),(t=this._getPlayer())&&(this._scheduleLayout(),t.play()),this.applyVolume())},te._getPlayer=function(){return null===this.impl&&this._createPlayer(),this.impl},te._createPlayer=function(){if(this.impl)return this.impl;var t=this.source,e=this.backend;log("preferred backend: "+e);var i=P.__videoBackends,n=[];if(e&&i[e]){var o=i[e]();return this.impl=o.createPlayer(this)}for(var r in i){var a=(o=i[r]()).probeUrl(t);0<a&&n.push({backend:o,score:a})}if(n.sort(function(t,e){return e.score-t.score}),0===n.length)throw new Error("no backends for source "+t);return this.impl=n[0].backend.createPlayer(this)},te._scheduleLayout=function(){this._context.delayedAction("layout",this,this._doLayout)},te.pause=function(){var t=this._getPlayer();t&&t.pause()},te._doLayout=function(){var t=this._getPlayer();t&&t.setRect.apply(t,this.toScreen().slice(0,4))},te.stop=function(){var t=this._getPlayer();t&&t.stop()},te.getAudioTracks=function(){var t=this._getPlayer();return t?t.getAudioTracks():[]},te.getSubtitles=function(){var t=this._getPlayer();return t?t.getSubtitles():[]},te.getVideoTracks=function(){var t=this._getPlayer();return t?t.getVideoTracks():[]},te.applyVolume=function(){var t=this._get("volumeStorage",!0);1<this.volume?this.volume=1:this.volume<0&&(this.volume=0),t.value=this.volume;var e=this._getPlayer();e&&e.setVolume(this.volume)},te.__complete=function(){var t=this._get("volumeStorage",!0);Jt.__complete.call(this),this.volume=+t.value;var e=this._getPlayer();e&&e.setBackgroundColor(this.backgroundColor),this.autoPlay&&this.source&&this.play()},te.volumeUp=function(){this.volume+=.1},te.volumeDown=function(){this.volume-=.1},te.toggleMute=function(){var t=this._getPlayer();t&&t.setMute(!this.muted)},te.setOption=function(t,e){var i=this._getPlayer();i&&i.setOption(t,e)},te.setAudioTrack=function(t){var e=this._getPlayer();e&&e.setAudioTrack(t)},te.setSubtitles=function(t){var e=this._getPlayer();e&&e.setSubtitles(t)},te.setVideoTrack=function(t){var e=this._getPlayer();e&&e.setVideoTrack(t)},te.setupDrm=function(t,e,i,n){var o=this._getPlayer();o&&o.setupDrm(t,e,i,n)},te.seek=function(t){var e=this._getPlayer();e&&e.seek(t)},te.seekTo=function(t){var e=this._getPlayer();e&&e.seekTo(t)},P._protoOnChanged(te,"backend",function(t){this.impl=null,this._createPlayer()}),P._protoOnChanged(te,"backgroundColor",function(t){var e=this._getPlayer();e&&e.setBackgroundColor(t)}),P._protoOnChanged(te,"loop",function(t){var e=this._getPlayer();e&&e.setLoop(t)}),P._protoOnChanged(te,"source",function(t){var e=this._getPlayer();e&&e.setSource(t)}),P._protoOnChanged(te,"recursiveVisible",function(t){var e=this._getPlayer();e&&e.setVisibility(t)}),P._protoOnChanged(te,"ready",function(t){log("ReadyState: "+this.ready)}),P._protoOnChanged(te,"volume",function(t){this.applyVolume()}),P._protoOnChanged(te,"autoPlay",function(t){this.setOption("autoplay",t)}),P._protoOnChanged(te,"backgroundImage",function(t){this.setOption("poster",t)}),P._protoOn(te,"newBoundingBox",function(){this._scheduleLayout()}),P._protoOn(te,"error",function(t){this.paused=!1,this.waiting=!1}),te.$c=function(t){Jt.$c.call(this,t.$b={});var e=new P.PropertyStorage(this);(t._this$child0=e).$c(t.$c$_this$child0={}),e._setId("volumeStorage"),this.addChild(e)},te.$s=function(t){Jt.$s.call(this,t.$b),delete t.$b;var e=t._this$child0;e.$s(t.$c$_this$child0),delete t.$c$_this$child0,e._removeUpdater("defaultValue"),e.defaultValue=1,e._removeUpdater("name"),e.name="volume",e.completed(),this.completed()};var ee=P.Item,ie=ee.prototype,ne=P.Rectangle=function(t,e){ee.apply(this,arguments),this._context.backend.initRectangle(this)},oe=ne.prototype=Object.create(ie);(oe._propertyToStyle=Object.create(ie._propertyToStyle)).color="background-color",oe.constructor=ne,oe.componentName="core.Rectangle",y.addProperty(oe,"color","color","#0000"),y.addLazyProperty(oe,"border",function(t,e){var i=new P.Border(t,e),n={lazy$border:i};return i.$c(n.$c$lazy$border={}),(i=n.lazy$border).$s(n.$c$lazy$border),delete n.$c$lazy$border,i.completed(),i}),y.addProperty(oe,"Gradient","gradient"),P._protoOnChanged(oe,"color",function(t){this.style("background-color",P.Color.normalize(t))}),oe.$c=function(t){ie.$c.call(this,t.$b={})},oe.$s=function(t){ie.$s.call(this,t.$b),delete t.$b,this.completed()};var re=P.Rectangle,ae=re.prototype,se=o.NestedVideo=function(t,e){re.apply(this,arguments)},ce=se.prototype=Object.create(ae);ce.constructor=se,ce.componentName="controls.experimental.NestedVideo",y.addProperty(ce,"bool","display"),ce.hide=function(){var t=this._get("videoPlayer",!0);this.visible=!1,this.display=!1,t.stop()},ce.showAndPlay=function(t){var e=this._get("videoPlayer",!0);this.visible=!0,this.display=!0,e.source=t},ce.$c=function(t){ae.$c.call(this,t.$b={});var e=new P.VideoPlayer(this);(t._this$child0=e).$c(t.$c$_this$child0={}),e._setId("videoPlayer"),this.addChild(e)},ce.$s=function(t){var e=this;ae.$s.call(this,t.$b),delete t.$b,e._removeUpdater("color"),e.color="transparent",e._removeUpdater("visible"),e.visible=!1,e.transform._replaceUpdater("scaleX",function(){e.transform.scaleX=e.display?1.1:.001},[e,"display"]),e.transform._removeUpdater("scaleY"),e.transform.scaleY=1.1,e._removeUpdater("clip"),e.clip=!0;var i=t._this$child0;i.$s(t.$c$_this$child0),delete t.$c$_this$child0,i._removeUpdater("autoPlay"),i.autoPlay=!0,i.anchors._removeUpdater("fill"),i.anchors.fill=i.parent,i.completed();var n=new P.Animation(e),o={behavior__this_on_transform:n};n.$c(o.$c$behavior__this_on_transform={}),(n=o.behavior__this_on_transform).$s(o.$c$behavior__this_on_transform),delete o.$c$behavior__this_on_transform,n._removeUpdater("duration"),n.duration=300,n._removeUpdater("delay"),n.delay=300,n.completed(),e.setAnimation("transform",n),e.completed()};var he=P.Object,le=he.prototype,de=P.MouseMoveMixin=function(t,e){he.apply(this,arguments),this.element=this.parent.element,this._bindMove(this.enabled)},pe=de.prototype=Object.create(le);pe.constructor=de,pe.componentName="core.MouseMoveMixin",pe.mouseMove=P.createSignal("mouseMove"),y.addProperty(pe,"bool","enabled",!0),y.addProperty(pe,"int","mouseX"),y.addProperty(pe,"int","mouseY"),pe._updatePosition=function(t){var e=this.parent,i=t.offsetX,n=t.offsetY;return 0<=i&&0<=n&&i<e.width&&n<e.height&&(this.mouseX=i,this.mouseY=n,this.mouseMove(i,n),!0)},pe._bindMove=function(t){t&&!this._mouseMoveBinder&&(this._mouseMoveBinder=new P.EventBinder(this.element),this._mouseMoveBinder.on("mousemove",function(t){this._updatePosition(t)||t.preventDefault()}.bind(this))),this._mouseMoveBinder&&this._mouseMoveBinder.enable(t)},P._protoOnChanged(pe,"enabled",function(t){this._bindMove(t)}),pe.$c=function(t){le.$c.call(this,t.$b={})},pe.$s=function(t){le.$s.call(this,t.$b),delete t.$b,this.completed()};var ue=P.Object,fe=ue.prototype,ge=i.Method=function(t,e){ue.apply(this,arguments)},_e=ge.prototype=Object.create(fe);_e.constructor=ge,_e.componentName="controls.web.api.Method",y.addProperty(_e,"string","type","GET"),y.addProperty(_e,"string","name"),y.addProperty(_e,"string","path"),_e.args=function(){},_e.call=function(t,e){var i=this.args.length;if(e.length<i+2)throw new Error("not enough arguments for method "+this.name);i=e.length-2;var n=Array.prototype.slice.call(e,0,i),o=this.args.apply(this,n),r=e[i+0],a=e[i+1],s={},c=this.headers(s);void 0!==c&&(s=c);var h=this.pathArgs(this.path,n);t.call(h,r,a,this.type,o,s)},_e.headers=function(t){},_e.pathArgs=function(t,e){var t=this.path,i=0;return t=t.replace(/\{(\w+)\}/g,function(t){return i<e.length?e[i++]:""})},P._protoOnChanged(_e,"name",function(t){this.parent._registerMethod(this.name,this)}),_e.$c=function(t){fe.$c.call(this,t.$b={})},_e.$s=function(t){fe.$s.call(this,t.$b),delete t.$b,this.completed()};var me=P.Object,ve=me.prototype,ye=P.Font=function(t,e){me.apply(this,arguments)},be=ye.prototype=Object.create(ve);be.constructor=ye,be.componentName="core.Font",y.addProperty(be,"string","family",$manifest$style$font$family),y.addProperty(be,"bool","italic"),y.addProperty(be,"bool","bold"),y.addProperty(be,"bool","underline"),y.addProperty(be,"bool","overline"),y.addProperty(be,"bool","strike"),y.addProperty(be,"bool","strikeout"),y.addProperty(be,"real","letterSpacing"),y.addProperty(be,"real","wordSpacing"),y.addProperty(be,"int","pixelSize",$manifest$style$font$pixelSize),y.addProperty(be,"int","pointSize"),y.addProperty(be,"real","lineHeight",$manifest$style$font$lineHeight),y.addProperty(be,"int","weight"),be.MixedCase=0,ye.MixedCase=0,be.AllUppercase=1,ye.AllUppercase=1,be.AllLowercase=2,ye.AllLowercase=2,be.SmallCaps=3,ye.SmallCaps=3,be.Capitalize=4,ye.Capitalize=4,y.addProperty(be,"enum","capitalization"),be._updateTextDecoration=function(){var t=(this.underline?" underline":"")+(this.overline?" overline":"")+(this.strike||this.strikeout?" line-through":"");this.parent.style("text-decoration",t),this.parent._updateSize()},P._protoOnChanged(be,"capitalization",function(t){switch(this.parent.style("text-transform","none"),this.parent.style("font-variant","normal"),t){case this.AllUppercase:this.parent.style("text-transform","uppercase");break;case this.AllLowercase:this.parent.style("text-transform","lowercase");break;case this.SmallCaps:this.parent.style("font-variant","small-caps");break;case this.Capitalize:this.parent.style("text-transform","capitalize")}}),P._protoOnChanged(be,"pointSize",function(t){0<t&&(this.pixelSize=0),this.parent.style("font-size",0<t?t+"pt":""),this.parent._updateSize()}),P._protoOnChanged(be,"pixelSize",function(t){0<t&&(this.pointSize=0),this.parent.style("font-size",0<t?t+"px":""),this.parent._updateSize()});I=function(t){this._updateTextDecoration()};P._protoOnChanged(be,"strike",I),P._protoOnChanged(be,"overline",I),P._protoOnChanged(be,"strikeout",I),P._protoOnChanged(be,"underline",I),P._protoOnChanged(be,"family",function(t){this.parent.style("font-family",t),this.parent._updateSize()}),P._protoOnChanged(be,"italic",function(t){this.parent.style("font-style",t?"italic":"normal"),this.parent._updateSize()}),P._protoOnChanged(be,"weight",function(t){this.parent.style("font-weight",t),this.parent._updateSize()}),P._protoOnChanged(be,"bold",function(t){this.parent.style("font-weight",t?"bold":"normal"),this.parent._updateSize()}),P._protoOnChanged(be,"letterSpacing",function(t){this.parent.style("letter-spacing",t+"px"),this.parent._updateSize()}),P._protoOnChanged(be,"lineHeight",function(t){this.parent.style("line-height",t),this.parent._updateSize()}),P._protoOnChanged(be,"wordSpacing",function(t){this.parent.style("word-spacing",t+"px"),this.parent._updateSize()}),be.$c=function(t){ve.$c.call(this,t.$b={})},be.$s=function(t){ve.$s.call(this,t.$b),delete t.$b,this.completed()};var $e=P.BaseLayout,we=$e.prototype,xe=P.BaseView=function(t,e){$e.apply(this,arguments),this._items=[],this._modelUpdate=new P.model.ModelUpdate,this._attached=null,this._modelReset=this._onReset.bind(this),this._modelRowsInserted=this._onRowsInserted.bind(this),this._modelRowsChanged=this._onRowsChanged.bind(this),this._modelRowsRemoved=this._onRowsRemoved.bind(this)},Ce=xe.prototype=Object.create(we);Ce.constructor=xe,Ce.componentName="core.BaseView",Ce.scrollEvent=P.createSignal("scrollEvent"),Ce.layoutFinished=P.createSignal("layoutFinished"),y.addProperty(Ce,"Item","highlight"),y.addProperty(Ce,"Object","model"),y.addProperty(Ce,"Item","delegate"),y.addProperty(Ce,"int","contentX"),y.addProperty(Ce,"int","contentY"),y.addProperty(Ce,"int","scrollingStep",0),y.addProperty(Ce,"int","animationDuration",0),y.addProperty(Ce,"string","animationEasing","ease"),y.addProperty(Ce,"bool","contentFollowsCurrentItem",!0),y.addProperty(Ce,"bool","nativeScrolling"),y.addProperty(Ce,"real","prerender",.5),y.addProperty(Ce,"string","visibilityProperty"),y.addProperty(Ce,"BaseViewContent","content"),Ce.Contain=0,xe.Contain=0,Ce.Beginning=1,xe.Beginning=1,Ce.Center=2,xe.Center=2,Ce.End=3,xe.End=3,Ce.Visible=4,xe.Visible=4,Ce.Page=5,xe.Page=5,y.addProperty(Ce,"enum","positionMode"),Ce.discard=function(){this._detach(),P.BaseLayout.prototype.discard.apply(this)},Ce._processUpdates=function(){this._modelUpdate.apply(this),qml.core.BaseLayout.prototype._processUpdates.apply(this),this.count=this._items.length},Ce.focusCurrent=function(){var t,e,i=this.count;0!==i&&((t=this.currentIndex)<0||i<=t?this.keyNavigationWraps?this.currentIndex=(t+i)%i:this.currentIndex=t<0?0:i-1:((e=this._items[t])&&this.focusChild(e),this.contentFollowsCurrentItem&&this.positionViewAtIndex(t),this.highlight&&(this.highlight.x=e.viewX,this.highlight.y=e.viewY,this.highlight.width=e.width,this.highlight.height=e.height)))},Ce._attach=function(){var t=this._get("model",!0);if(!this._attached&&this.model&&this.delegate){this.trace&&log("attaching model...");var e=P.Model,i=typeof(t=this.model);if(!(void 0!==e&&t instanceof e))if(Array.isArray(t))t=new P.model.ArrayModelWrapper(t);else{if("number"!=i)throw new Error("unknown value of type '"+typeof t+"', attached to model property: "+t+("object"==i&&"componentName"in t?", component name: "+t.componentName:""));for(var n=[],o=0;o<t;++o)n.push({});t=new P.model.ArrayModelWrapper(n)}t.on("reset",this._modelReset),t.on("rowsInserted",this._modelRowsInserted),t.on("rowsChanged",this._modelRowsChanged),t.on("rowsRemoved",this._modelRowsRemoved),this._attached=t,this._onReset()}},Ce._detach=function(){var t=this._get("model",!0);(t=this._attached)&&(this.trace&&log("detaching model..."),this._attached=null,t.removeListener("reset",this._modelReset),t.removeListener("rowsInserted",this._modelRowsInserted),t.removeListener("rowsChanged",this._modelRowsChanged),t.removeListener("rowsRemoved",this._modelRowsRemoved))},Ce._onReset=function(){var t=this._get("model",!0),t=this._attached;this.trace&&log("reset",this._items.length,t.count),this._modelUpdate.reset(t),this._scheduleLayout()},Ce.__complete=function(){we.__complete.call(this),this.highlight&&(this.highlight.element.remove(),this.content.element.prepend(this.highlight.element));var i=this;this.element.on("scroll",function(){var t=i.element.getScrollX(),e=i.element.getScrollY();i._updateScrollPositions(t,e),i.scrollEvent(t,e)}.bind(this))},Ce._updateItems=function(t,e){for(var i=t;i<e;++i)this._updateDelegate(i)},Ce._onRowsChanged=function(t,e){this.trace&&log("rows changed",t,e),this._modelUpdate.update(this._attached,t,e),this._scheduleLayout()},Ce._onRowsInserted=function(t,e){this.trace&&log("rows inserted",t,e),this._modelUpdate.insert(this._attached,t,e),this._scheduleLayout()},Ce._onRowsRemoved=function(t,e){this.trace&&log("rows removed",t,e),this._modelUpdate.remove(this._attached,t,e),this._scheduleLayout()},Ce._removeItems=function(t,e){var i=this._items.splice(t,e-t),n=this;i.forEach(function(t){n._discardItem(t)})},Ce._insertItems=function(t,e){var i=e-t+2,n=new Array(i);n[0]=t,n[1]=0;for(var o=2;o<i;++o)n[o]=null;Array.prototype.splice.apply(this._items,n)},Ce._updateDelegateIndex=function(t){var e=this._items[t];e&&(e._local.model.index=t,e._createPropertyStorage("_rowIndex").callOnChanged(e,"_rowIndex"))},Ce._updateDelegate=function(t){var e,i=this._items[t];i&&((e=this._attached.get(t)).index=t,i._local.model=e,i._createPropertyStorage("_row").callOnChanged(i,"_row"))},Ce.itemAtIndex=function(t){var e=this._items[t];return e||null},Ce._createDelegate=function(t,e){var i=this._items,n=i[t];if(null!=n)return n;var o=this.visibilityProperty,r=this._attached.get(t);return this.trace&&log("createDelegate",t,r),o&&!r[o]?null:(r.index=t,n=this.delegate(this,r),(i[t]=n).view=this,n.element.remove(),void 0===e?this.content.element.append(n.element):e.call(this,n),n.recursiveVisible=this.recursiveVisible&&n.visible&&n.visibleInView,n)},Ce._discardItem=function(t){null!==t&&(this.focusedChild===t&&(this.focusedChild=null),t.discard())},Ce.positionViewAtItemHorizontally=function(t,e,i){var n=this.contentX,o=(this.contentY,t[0]),r=(t[1],t[2]),a=(t[3],this.width),s=(this.height,o-a/2+r/2);a<r?this.contentX=i?s:o:e&&this.contentWidth>a?this.contentX=s<0?0:o>this.contentWidth-a/2-r/2?this.contentWidth-a:s:o-n<=0?this.contentX=o:a<o-n+r&&(this.contentX=o+r-a)},Ce.positionViewAtItemVertically=function(t,e,i){this.contentX;var n=this.contentY,o=(t[0],t[1]),r=(t[2],t[3]),a=(this.width,this.height),s=o-a/2+r/2;a<r?this.contentY=i?s:o:e&&this.contentHeight>a?this.contentY=s<0?0:o>this.contentHeight-a/2-r/2?this.contentHeight-a:s:o-n<=0?this.contentY=o:a<o-n+r&&(this.contentY=o+r-a)},Ce.itemAt=function(t,e){var i=this.indexAt(t,e);return 0<=i?this._items[i]:null},Ce._updateScrollPositions=function(t,e,i){this._setProperty("contentX",t),this._setProperty("contentY",e),this.content._updateScrollPositions(t,e,i)},P._protoOnChanged(Ce,"model",function(t){this.trace&&log("model changed to ",t),this._detach(),this._modelUpdate.clear(),this._removeItems(0,this.count),this.count=0,this._scheduleLayout()}),P._protoOnChanged(Ce,"recursiveVisible",function(e){e&&this._scheduleLayout();var i=this;this._items.forEach(function(t){null!==t&&i._updateVisibilityForChild(t,e)}),this._updateVisibilityForChild(this.content,e)}),P._protoOnChanged(Ce,"delegate",function(t){t&&(t.visible=!1)}),P._protoOnChanged(Ce,"currentIndex",function(t){this.focusCurrent()}),P._protoOnChanged(Ce,"focusedChild",function(t){var e=this._items.indexOf(this.focusedChild);0<=e&&(this.currentIndex=e)});I=function(t){this._scheduleLayout()};P._protoOnChanged(Ce,"height",I),P._protoOnChanged(Ce,"width",I),P._protoOnChanged(Ce,"contentX",function(t){this.content.x=-t}),P._protoOnChanged(Ce,"contentY",function(t){this.content.y=-t}),Ce.$c=function(t){we.$c.call(this,t.$b={});var e=new P.BaseViewContent(this);(t._this$content=e).$c(t.$c$_this$content={}),this.content=e},Ce.$s=function(t){var e=this;we.$s.call(this,t.$b),delete t.$b,e._removeUpdater("keyNavigationWraps"),e.keyNavigationWraps=!0,e._replaceUpdater("cssPointerTouchEvents",function(){e.cssPointerTouchEvents=e.nativeScrolling},[e,"nativeScrolling"]);var i=t._this$content;i.$s(t.$c$_this$content),delete t.$c$_this$content,i._replaceUpdater("cssTranslatePositioning",function(){i.cssTranslatePositioning=i.parent.cssTranslatePositioning},[i.parent,"cssTranslatePositioning"]),i._replaceUpdater("cssPointerTouchEvents",function(){i.cssPointerTouchEvents=i.parent.cssPointerTouchEvents},[i.parent,"cssPointerTouchEvents"]);var n=new P.Animation(i),o={behavior__this_content_on_y:n};n.$c(o.$c$behavior__this_content_on_y={}),(n=o.behavior__this_content_on_y).$s(o.$c$behavior__this_content_on_y),delete o.$c$behavior__this_content_on_y,n._replaceUpdater("duration",function(){n.duration=n.parent.parent.animationDuration},[n.parent.parent,"animationDuration"]),n._replaceUpdater("easing",function(){n.easing=n.parent.parent.animationEasing},[n.parent.parent,"animationEasing"]),n.completed(),i.setAnimation("y",n);var r=new P.Animation(i),a={behavior__this_content_on_x:r};r.$c(a.$c$behavior__this_content_on_x={}),(r=a.behavior__this_content_on_x).$s(a.$c$behavior__this_content_on_x),delete a.$c$behavior__this_content_on_x,r._replaceUpdater("duration",function(){r.duration=r.parent.parent.animationDuration},[r.parent.parent,"animationDuration"]),r._replaceUpdater("easing",function(){r.easing=r.parent.parent.animationEasing},[r.parent.parent,"animationEasing"]),r.completed(),i.setAnimation("x",r);var s=new P.Animation(i),c={behavior__this_content_on_transform:s};s.$c(c.$c$behavior__this_content_on_transform={}),(s=c.behavior__this_content_on_transform).$s(c.$c$behavior__this_content_on_transform),delete c.$c$behavior__this_content_on_transform,s._replaceUpdater("duration",function(){s.duration=s.parent.parent.animationDuration},[s.parent.parent,"animationDuration"]),s._replaceUpdater("easing",function(){s.easing=s.parent.parent.animationEasing},[s.parent.parent,"animationEasing"]),s.completed(),i.setAnimation("transform",s),i.completed(),e._replaceUpdater("nativeScrolling",function(){e.nativeScrolling=e._context.system.device===e._context.system.Mobile},[e._context.system,"device",e._context.system,"Mobile"]),e._removeUpdater("contentWidth"),e.contentWidth=1,e._removeUpdater("contentHeight"),e.contentHeight=1,e._removeUpdater("handleNavigationKeys"),e.handleNavigationKeys=!0,e.completed()};var ke=P.BaseView,Pe=ke.prototype,Ae=P.GridView=function(t,e){ke.apply(this,arguments)},Oe=Ae.prototype=Object.create(Pe);Oe.constructor=Ae,Oe.componentName="core.GridView",y.addProperty(Oe,"int","cellWidth",100),y.addProperty(Oe,"int","cellHeight",100),y.addProperty(Oe,"int","rows"),y.addProperty(Oe,"int","columns"),Oe.FlowLeftToRight=0,Ae.FlowLeftToRight=0,Oe.FlowTopToBottom=1,Ae.FlowTopToBottom=1,y.addProperty(Oe,"enum","flow"),Oe._updateOverflow=function(){var t;this.nativeScrolling&&(t={},this.flow!==this.FlowLeftToRight?(t["overflow-x"]="auto",t["overflow-y"]="hidden"):(t["overflow-x"]="hidden",t["overflow-y"]="auto"),this.style(t))},Oe.moveUp=function(){if(this.flow===this.FlowLeftToRight){if(!this.keyNavigationWraps&&this.currentIndex<this.columns)return!1;this.keyNavigationWraps&&this.currentIndex-this.columns<0?this.currentIndex=this.count-1:this.currentIndex-this.columns<0?this.currentIndex=0:this.currentIndex-=this.columns}else{if(!this.keyNavigationWraps&&0===this.currentIndex)return!1;--this.currentIndex}return!0},Oe.moveLeft=function(){if(this.flow===this.FlowLeftToRight)if(this.keyNavigationWraps&&0===this.currentIndex)this.currentIndex=this.count-1;else{if(!this.keyNavigationWraps&&0===this.currentIndex)return!1;--this.currentIndex}else{if(!this.keyNavigationWraps&&this.currentIndex<this.rows)return!1;this.currentIndex-this.rows<0?this.currentIndex=0:this.currentIndex-=this.rows}return!0},Oe.moveRight=function(){if(this.flow===this.FlowLeftToRight)if(this.keyNavigationWraps&&this.currentIndex===this.count-1)this.currentIndex=0;else{if(!this.keyNavigationWraps&&this.currentIndex===this.count-1)return!1;++this.currentIndex}else{if(!this.keyNavigationWraps&&this.currentIndex>this.count-this.rows+1)return!1;this.currentIndex+this.rows>=this.count?this.currentIndex=this.count-1:this.currentIndex+=this.rows}return!0},Oe.moveDown=function(){if(this.flow===this.FlowLeftToRight){var t=Math.floor(this.currentIndex/this.columns),e=Math.floor(this.count/this.columns);if(!this.keyNavigationWraps&&e<=t)return!1;this.keyNavigationWraps&&this.currentIndex+this.columns>=this.count?this.currentIndex=0:this.currentIndex+this.columns>=this.count?this.currentIndex=this.count-1:this.currentIndex+=this.columns}else{if(!this.keyNavigationWraps&&this.currentIndex===this.columns-1)return!1;++this.currentIndex}return!0},Oe._layout=function(){var t=this._get("model",!0);if(this.recursiveVisible||this.offlineLayout)if(t=this._attached)if(this.count=t.count,this.count){var e=this.flow===this.FlowLeftToRight,i=this._items,n=i.length,o=this.width,r=this.height;this.trace&&log("layout "+n+" into "+o+"x"+r+" @ "+this.content.x+","+this.content.y);for(var a,s,c=!1,h=0,l=0,d=this.content.x,p=this.content.y,u=e?function(){return r<=p+l}:function(){return o<=d+h},f=this.cellWidth,g=this.cellHeight,_=f+this.spacing,m=g+this.spacing,v=0;v<n&&!u();++v){(s=this._items[v])||(s=this._createDelegate(v))&&(c=!0),s&&(s.viewX=h,s.viewY=l),s&&(this.currentIndex!==v||s.focused||(this.focusChild(s),this.contentFollowsCurrentItem&&this.positionViewAtIndex(v)),a=e?0<=p+l+s.height&&p+l<r:0<=d+h+s.width&&d+h<o,s.visibleInView=a),e?0<(h+=_)&&o<h+f&&(h=0,l+=m):0<(l+=m)&&r<l+g&&(l=0,h+=_)}for(;v<n;++v){(s=i[v])&&(s.visibleInView=!1)}e?(this.columns=Math.floor((o+this.spacing)/(this.cellWidth+this.spacing)),this.rows=Math.floor((n+this.columns-1)/this.columns)):(this.rows=Math.floor((r+this.spacing)/(this.cellHeight+this.spacing)),this.columns=Math.floor((n+this.rows-1)/this.rows)),this.contentWidth=this.content.width=this.columns*(this.cellWidth+this.spacing)-this.spacing,this.contentHeight=this.content.height=this.rows*(this.cellHeight+this.spacing)-this.spacing,this.layoutFinished(),c&&this._context.scheduleComplete()}else this.layoutFinished();else this.layoutFinished()},Oe.__complete=function(){Pe.__complete.call(this),this._updateOverflow()},Oe.move=function(t,e){var i,n,o=this.flow===this.FlowLeftToRight;o&&this.contentHeight>this.height?((n=this.contentY+e)<0?n=0:n>this.contentHeight-this.height&&(n=this.contentHeight-this.height),this.contentY=n):!o&&this.contentWidth>this.width&&((i=this.contentX+t)<0?i=0:i>this.contentWidth-this.width&&(i=this.contentWidth-this.width),this.contentX=i)},Oe.positionViewAtIndex=function(t){var e=this.contentX,i=this.contentY,n=this.getItemPosition(t),o=n[0],r=n[1],a=n[2],s=n[3],c=this.width,h=this.height;if(this.flow===this.FlowLeftToRight){if(h<s)return void(this.contentY=r-h/2+s/2);r-i<0?this.contentY=r:h<r-i+s&&(this.contentY=r+s-h)}else{if(c<a)return void(this.contentX=o-c/2+a/2);o-e<0?this.contentX=o:c<o-e+a&&(this.contentX=o+a-c)}},Oe.getItemPosition=function(t){var e,i,n=this.flow===this.FlowLeftToRight,o=this.cellWidth,r=this.cellHeight;if(n){if(0===this.columns)return[0,0,0,0];e=t%this.columns*o,i=Math.floor(t/this.columns)*r}else{if(0===this.rows)return[0,0,0,0];e=Math.floor(t/this.rows)*o,i=t%this.rows*r}return[e,i,o,r]},Oe.indexAt=function(t,e){t-=this.content.x,e-=this.content.y;var i=this.flow===this.FlowLeftToRight;return t=Math.floor(t/(this.cellWidth+this.spacing)),e=Math.floor(e/(this.cellHeight+this.spacing)),i?e*this.columns+t:t*this.rows+e},P._protoOnChanged(Oe,"count",function(t){0==t&&(this.rows=0,this.columns=0)});I=function(t){this._scheduleLayout()};P._protoOnChanged(Oe,"cellWidth",I),P._protoOnChanged(Oe,"cellHeight",I),P._protoOnChanged(Oe,"flow",function(t){this._updateOverflow(),this._scheduleLayout()}),P._protoOnKey(Oe,"Key",function(t,e){if(!this.handleNavigationKeys)return!1;switch(t){case"Up":return this.moveUp();case"Down":return this.moveDown();case"Left":return this.moveLeft();case"Right":return this.moveRight()}}),Oe.$c=function(t){Pe.$c.call(this,t.$b={})},Oe.$s=function(t){Pe.$s.call(this,t.$b),delete t.$b,this.completed()};var Se=P.GridView,Ie=Se.prototype,Te=o.Mosaic=function(t,e){Se.apply(this,arguments)},Ue=Te.prototype=Object.create(Ie);Ue.constructor=Te,Ue.componentName="controls.experimental.Mosaic",Ue.play=P.createSignal("play"),Ue.itemFocused=P.createSignal("itemFocused"),y.addProperty(Ue,"bool","hoverMode"),y.addProperty(Ue,"bool","mobile"),y.addProperty(Ue,"int","offset"),y.addProperty(Ue,"int","delegateRadius"),Ue.fill=function(t,e){var i=[];for(var n in t){var o=e(t[n]);o&&i.push(o)}this.model.assign(i)},P._protoOnKey(Ue,"Key",function(t,e){return this.hoverMode=!1}),Ue.$c=function(t){Ie.$c.call(this,t.$b={}),this.delegate=function(t,e){var i=new P.Rectangle(t,e),n={delegate:i};i.$c(n.$c$delegate={}),i.pressed=P.createSignal("pressed").bind(i),y.addProperty(i,"bool","active"),y.addProperty(i,"Mixin","hoverMixin");var o=new P.MouseMoveMixin(i);(n.delegate$child0=o).$c(n.$c$delegate$child0={}),i.addChild(o);var r=new P.Image(i);(n.delegate$child1=r).$c(n.$c$delegate$child1={}),y.addProperty(r,"bool","display"),r._setId("programImage"),i.addChild(r);var a=new P.Rectangle(i);(n.delegate$child2=a).$c(n.$c$delegate$child2={});var s=new P.Gradient(a);(n.delegate_child2$gradient=s).$c(n.$c$delegate_child2$gradient={});var c=new P.GradientStop(s);(n.delegate_child2_gradient$child0=c).$c(n.$c$delegate_child2_gradient$child0={}),s.addChild(c);var h=new P.GradientStop(s);(n.delegate_child2_gradient$child1=h).$c(n.$c$delegate_child2_gradient$child1={}),s.addChild(h),a.gradient=s,i.addChild(a);var l=new P.Image(i);(n.delegate$child3=l).$c(n.$c$delegate$child3={}),i.addChild(l);var d=new v.EllipsisText(i);(n.delegate$child4=d).$c(n.$c$delegate$child4={}),i.addChild(d);var p=new P.Rectangle(i);(n.delegate$child5=p).$c(n.$c$delegate$child5={});var u=new P.Rectangle(p);(n.delegate_child5$child0=u).$c(n.$c$delegate_child5$child0={}),p.addChild(u),i.addChild(p);var f=new P.Timer(i);(n.delegate$child6=f).$c(n.$c$delegate$child6={}),f._setId("flipTimer"),i.addChild(f);var g=new v.HoverClickMixin(i);(n.delegate$hoverMixin=g).$c(n.$c$delegate$hoverMixin={}),i.hoverMixin=g,y.addAliasProperty(i,"hover",function(){return i.hoverMixin},"value"),(i=n.delegate).$s(n.$c$delegate),delete n.$c$delegate,i._removeUpdater("clip"),i.clip=!0,i._removeUpdater("color"),i.color="#464646",(g=n.delegate$hoverMixin).$s(n.$c$delegate$hoverMixin),delete n.$c$delegate$hoverMixin,g.completed(),i.effects.shadow._removeUpdater("blur"),i.effects.shadow.blur=10,i._replaceUpdater("height",function(){i.height=i.parent.cellHeight},[i.parent,"cellHeight"]),i._replaceUpdater("width",function(){i.width=i.parent.cellWidth},[i.parent,"cellWidth"]),i._replaceUpdater("radius",function(){i.radius=i._get("nowonTvGrid").delegateRadius},[i._get("nowonTvGrid"),"delegateRadius"]),i.effects.shadow._replaceUpdater("color",function(){i.effects.shadow.color=i.active?"#00f":"#0000"},[i,"active"]),i._replaceUpdater("active",function(){i.active=i.activeFocus},[i,"activeFocus"]),i.effects.shadow._removeUpdater("spread"),i.effects.shadow.spread=1,i._replaceUpdater("z",function(){i.z=i.active?i.parent.z+1:i.parent.z},[i.parent,"z",i,"active"]),i.transform._replaceUpdater("scaleX",function(){i.transform.scaleX=i.active?1.05:1},[i,"active"]),i.transform._replaceUpdater("scaleY",function(){i.transform.scaleY=i.active?1.05:1},[i,"active"]),i.on("clicked",function(){var t=this._get("model",!0);this.parent.currentIndex=t.index,this.pressed()}.bind(i)),i.on("pressed",function(){var t=this._get("model",!0);this.parent.play(t.index)}.bind(i)),i.onChanged("active",function(t){var e=this._get("flipTimer",!0);t&&e.restart()}.bind(i)),i.onPressed("Select",function(t,e){this.pressed()}.bind(i)),(o=n.delegate$child0).$s(n.$c$delegate$child0),delete n.$c$delegate$child0,o.on("mouseMove",function(){var t=this._get("model",!0),e=this._get("nowonTvGrid",!0);e.hoverMode=!0,e.currentIndex=t.index}.bind(o)),o.completed(),(r=n.delegate$child1).$s(n.$c$delegate$child1),delete n.$c$delegate$child1,r._replaceUpdater("source",function(){r.source=r._get("model").preview?r._get("model").preview:""},[r._get("_delegate"),"_row"]),r._removeUpdater("fillMode"),r.fillMode=k.core.Image.prototype.PreserveAspectCrop,r._replaceUpdater("visible",function(){r.visible=r.source},[r,"source"]),r.anchors._removeUpdater("fill"),r.anchors.fill=r.parent,r.onChanged("status",function(t){this.display=this.status==this.Ready}.bind(r)),r.completed(),(a=n.delegate$child2).$s(n.$c$delegate$child2),delete n.$c$delegate$child2,a.anchors._replaceUpdater("bottomMargin",function(){a.anchors.bottomMargin=2*a._context.virtualScale},[a._context,"virtualScale"]),a._replaceUpdater("width",function(){a.width=a.parent.width},[a.parent,"width"]),(s=n.delegate_child2$gradient).$s(n.$c$delegate_child2$gradient),delete n.$c$delegate_child2$gradient,(c=n.delegate_child2_gradient$child0).$s(n.$c$delegate_child2_gradient$child0),delete n.$c$delegate_child2_gradient$child0,c._removeUpdater("color"),c.color="#0000",c._removeUpdater("position"),c.position=0,c.completed(),(h=n.delegate_child2_gradient$child1).$s(n.$c$delegate_child2_gradient$child1),delete n.$c$delegate_child2_gradient$child1,h._removeUpdater("color"),h.color="#000",h._removeUpdater("position"),h.position=1,h.completed(),s.completed(),a.anchors._replaceUpdater("bottom",function(){a.anchors.bottom=a.parent.bottom},[a.parent,"bottom"]),a._replaceUpdater("height",function(){a.height=70*a._context.virtualScale},[a._context,"virtualScale"]),a.completed(),(l=n.delegate$child3).$s(n.$c$delegate$child3),delete n.$c$delegate$child3,l._removeUpdater("horizontalAlignment"),l.horizontalAlignment=k.core.Image.prototype.AlignRight,l._replaceUpdater("source",function(){l.source=l._get("model").icon?l._get("model").icon:""},[l._get("_delegate"),"_row"]),l.anchors._replaceUpdater("bottomMargin",function(){l.anchors.bottomMargin=21*l._context.virtualScale},[l._context,"virtualScale"]),l._replaceUpdater("height",function(){l.height=70*l._context.virtualScale},[l._context,"virtualScale"]),l._replaceUpdater("width",function(){l.width=100*l._context.virtualScale},[l._context,"virtualScale"]),l._removeUpdater("fillMode"),l.fillMode=k.core.Image.prototype.PreserveAspectFit,l._removeUpdater("verticalAlignment"),l.verticalAlignment=k.core.Image.prototype.AlignTop,l.anchors._replaceUpdater("bottom",function(){l.anchors.bottom=l.parent.bottom},[l.parent,"bottom"]),l._replaceUpdater("x",function(){l.x=10*l._context.virtualScale},[l._context,"virtualScale"]),l.completed(),(d=n.delegate$child4).$s(n.$c$delegate$child4),delete n.$c$delegate$child4,d._removeUpdater("color"),d.color="#fff",d._replaceUpdater("text",function(){d.text=d._get("model").title},[d._get("_delegate"),"_row"]),d.anchors._replaceUpdater("bottomMargin",function(){d.anchors.bottomMargin=6*d._context.virtualScale},[d._context,"virtualScale"]),d._replaceUpdater("width",function(){d.width=270*d._context.virtualScale},[d._context,"virtualScale"]),d.anchors._replaceUpdater("bottom",function(){d.anchors.bottom=d.parent.bottom},[d.parent,"bottom"]),d.font._replaceUpdater("pixelSize",function(){d.font.pixelSize=d._get("nowonTvGrid").mobile?9*d._context.virtualScale:18*d._context.virtualScale},[d._get("nowonTvGrid"),"mobile",d._context,"virtualScale"]),d._replaceUpdater("x",function(){d.x=10*d._context.virtualScale},[d._context,"virtualScale"]),d.completed(),(p=n.delegate$child5).$s(n.$c$delegate$child5),delete n.$c$delegate$child5,p._removeUpdater("color"),p.color="#000c",p._replaceUpdater("width",function(){p.width=p.parent.width},[p.parent,"width"]),p.anchors._replaceUpdater("bottom",function(){p.anchors.bottom=p.parent.bottom},[p.parent,"bottom"]),p._removeUpdater("clip"),p.clip=!0,p._replaceUpdater("height",function(){p.height=2*p._context.virtualScale},[p._context,"virtualScale"]),(u=n.delegate_child5$child0).$s(n.$c$delegate_child5$child0),delete n.$c$delegate_child5$child0,u._removeUpdater("color"),u.color="#e53935",u._replaceUpdater("width",function(){u.width=u.parent.width*u._get("model").progress},[u._get("_delegate"),"_row",u.parent,"width"]),u._replaceUpdater("height",function(){u.height=u.parent.height},[u.parent,"height"]),u.completed(),p.completed(),(f=n.delegate$child6).$s(n.$c$delegate$child6),delete n.$c$delegate$child6,f._removeUpdater("interval"),f.interval=3e3,f.on("triggered",function(){var t=this._get("model",!0),e=this._get("nowonTvGrid",!0);this.parent.active&&(this.parent.transform.scaleX=0,e.itemFocused(t.index))}.bind(f)),f.completed();var _=new P.Animation(i),m={behavior_delegate_on_transform:_};return _.$c(m.$c$behavior_delegate_on_transform={}),(_=m.behavior_delegate_on_transform).$s(m.$c$behavior_delegate_on_transform),delete m.$c$behavior_delegate_on_transform,_._removeUpdater("duration"),_.duration=300,_.completed(),i.setAnimation("transform",_),i.completed(),i};var e=new P.ListModel(this);(t._this$model=e).$c(t.$c$_this$model={}),this.model=e,this._setId("nowonTvGrid")},Ue.$s=function(t){var e=this;Ie.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("cellWidth",function(){e.cellWidth=(e._context.width>e._context.height?.25:.5)*e.width-e.spacing},[e,"width",e._context,"height",e._context,"width",e,"spacing"]),e._replaceUpdater("mobile",function(){e.mobile=e._context.system.device===e._context.system.Mobile},[e._context.system,"device",e._context.system,"Mobile"]),e._removeUpdater("keyNavigationWraps"),e.keyNavigationWraps=!1,e._replaceUpdater("spacing",function(){e.spacing=10*e._context.virtualScale},[e._context,"virtualScale"]),e._replaceUpdater("contentFollowsCurrentItem",function(){e.contentFollowsCurrentItem=!e.hoverMode},[e,"hoverMode"]),e._replaceUpdater("height",function(){e.height=e.parent.height},[e.parent,"height"]),e._replaceUpdater("width",function(){e.width=e.parent.width},[e.parent,"width"]),e._removeUpdater("nativeScrolling"),e.nativeScrolling=!0,e.content._removeUpdater("cssTranslatePositioning"),e.content.cssTranslatePositioning=!0;var i=t._this$model;i.$s(t.$c$_this$model),delete t.$c$_this$model,i.completed(),e._replaceUpdater("cellHeight",function(){e.cellHeight=.625*e.cellWidth},[e,"cellWidth"]),e.completed()};var Ee=P.Object,Le=Ee.prototype,ze=P.Border=function(t,e){Ee.apply(this,arguments)},Me=ze.prototype=Object.create(Le);Me.constructor=ze,Me.componentName="core.Border",y.addProperty(Me,"int","width"),y.addProperty(Me,"color","color","black"),y.addLazyProperty(Me,"left",function(t,e){var i=new P.BorderSide(t,e),n={lazy$left:i};return i.$c(n.$c$lazy$left={}),(i=n.lazy$left).$s(n.$c$lazy$left),delete n.$c$lazy$left,i._removeUpdater("name"),i.name="left",i.completed(),i}),y.addLazyProperty(Me,"right",function(t,e){var i=new P.BorderSide(t,e),n={lazy$right:i};return i.$c(n.$c$lazy$right={}),(i=n.lazy$right).$s(n.$c$lazy$right),delete n.$c$lazy$right,i._removeUpdater("name"),i.name="right",i.completed(),i}),y.addLazyProperty(Me,"top",function(t,e){var i=new P.BorderSide(t,e),n={lazy$top:i};return i.$c(n.$c$lazy$top={}),(i=n.lazy$top).$s(n.$c$lazy$top),delete n.$c$lazy$top,i._removeUpdater("name"),i.name="top",i.completed(),i}),y.addLazyProperty(Me,"bottom",function(t,e){var i=new P.BorderSide(t,e),n={lazy$bottom:i};return i.$c(n.$c$lazy$bottom={}),(i=n.lazy$bottom).$s(n.$c$lazy$bottom),delete n.$c$lazy$bottom,i._removeUpdater("name"),i.name="bottom",i.completed(),i}),Me.None=0,ze.None=0,Me.Hidden=1,ze.Hidden=1,Me.Dotted=2,ze.Dotted=2,Me.Dashed=3,ze.Dashed=3,Me.Solid=4,ze.Solid=4,Me.Double=5,ze.Double=5,Me.Groove=6,ze.Groove=6,Me.Ridge=7,ze.Ridge=7,Me.Inset=8,ze.Inset=8,Me.Outset=9,ze.Outset=9,y.addProperty(Me,"enum","style",ze.Solid),Me.Inner=0,ze.Inner=0,Me.Outer=1,ze.Outer=1,Me.Center=2,ze.Center=2,y.addProperty(Me,"enum","type"),P._protoOnChanged(Me,"color",function(t){var e=P.Color.normalize(this.color);this.parent.style("border-color",e)}),P._protoOnChanged(Me,"width",function(t){var e=this.parent;switch(e.style("border-width",t),this.type){case this.Inner:e._borderXAdjust=0,e._borderYAdjust=0,e._borderInnerWidthAdjust=-2*t,e._borderInnerHeightAdjust=-2*t,e._setSizeAdjust();break;case this.Outer:e._borderXAdjust=-t,e._borderYAdjust=-t,e._borderWidthAdjust=0,e._borderHeightAdjust=0,e._setSizeAdjust();break;case this.Center:e._borderXAdjust=-t/2,e._borderYAdjust=-t/2,e._borderWidthAdjust=-t,e._borderHeightAdjust=-t,e._setSizeAdjust()}}),P._protoOnChanged(Me,"type",function(t){var e;switch(t){case this.Inner:e="border-box";break;case this.Outer:case this.Center:e="content-box"}this.parent.style("box-sizing",e)}),P._protoOnChanged(Me,"style",function(t){var e;switch(t){case this.None:e="none";break;case this.Hidden:e="hidden";break;case this.Dotted:e="dotted";break;case this.Dashed:e="dashed";break;case this.Solid:e="solid";break;case this.Double:e="double";break;case this.Groove:e="groove";break;case this.Ridge:e="ridge";break;case this.Inset:e="inset";break;case this.Outset:e="outset"}this.parent.style("border-style",e)}),Me.$c=function(t){Le.$c.call(this,t.$b={})},Me.$s=function(t){Le.$s.call(this,t.$b),delete t.$b,this.completed()};var Re=P.Object,He=Re.prototype,je=P.Timer=function(t,e){Re.apply(this,arguments),this._trigger=this._context.wrapNativeCallback(this.triggered.bind(this))},Ne=je.prototype=Object.create(He);Ne.constructor=je,Ne.componentName="core.Timer",Ne.triggered=P.createSignal("triggered"),y.addProperty(Ne,"int","interval",1e3),y.addProperty(Ne,"bool","repeat"),y.addProperty(Ne,"bool","running"),y.addProperty(Ne,"bool","triggeredOnStart"),Ne._restart=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0),this._interval&&(clearTimeout(this._interval),this._interval=void 0),this.running&&(this._context,this.repeat?this._interval=setInterval(this._trigger,this.interval):this._timeout=setTimeout(this._trigger,this.interval))},Ne.__complete=function(){He.__complete.call(this),this.running&&this.triggeredOnStart&&this.triggered()},Ne.stop=function(){this.running=!1},Ne.start=function(){this.running=!0},Ne.restart=function(){this.stop(),this.start()},P._protoOnChanged(Ne,"running",function(t){this._restart(),t&&this.triggeredOnStart&&(this._triggered=!1,this.triggered())});I=function(t){this._restart()};P._protoOnChanged(Ne,"interval",I),P._protoOnChanged(Ne,"repeat",I),P._protoOn(Ne,"triggered",function(){this.repeat||this.triggeredOnStart&&!this._triggered||(this.running=!1),this._triggered=!0}),Ne.$c=function(t){He.$c.call(this,t.$b={})},Ne.$s=function(t){He.$s.call(this,t.$b),delete t.$b,this.completed()};var Be=a.BaseActivity,Ve=Be.prototype,We=a.Activity=function(t,e){Be.apply(this,arguments)},Fe=We.prototype=Object.create(Ve);Fe.constructor=We,Fe.componentName="controls.core.Activity",Fe.getActivity=function(){return this},Fe.stop=function(){this.active=!1,this.stopped()},Fe.start=function(){this.active=!0,this.started()},Fe.$c=function(t){Ve.$c.call(this,t.$b={})},Fe.$s=function(t){Ve.$s.call(this,t.$b),delete t.$b,this.completed()};var De=a.Activity,Ye=De.prototype,Xe=s.MosaicPage=function(t,e){De.apply(this,arguments)},qe=Xe.prototype=Object.create(Ye);qe.constructor=Xe,qe.componentName="src.MosaicPage",y.addProperty(qe,"int","delegateRadius"),qe.init=function(){var t=this._get("anotherApi",!0),e=this._get("mosaicGrid",!0);this._get("api",!0);t.getMain(function(t){e.fill(t.element.collectionItems.items,function(t){if(t.element.basicCovers.items&&0<t.element.basicCovers.items.length){var e="",i=t.element.trailers.items;for(var n in i)if(0<=i[n].media.mimeType.indexOf("mp4")){e=i[n].url;break}return{video:e,preview:t.element.basicCovers.items[0].url,title:t.element.name}}return null})},function(t){log("Failed to get content",t)})},qe.$c=function(t){Ye.$c.call(this,t.$b={});var e=new o.Mosaic(this);(t._this$child0=e).$c(t.$c$_this$child0={});var i=new o.NestedVideo(e);(t._this_child0$highlight=i).$c(t.$c$_this_child0$highlight={});var n=new P.ClickMixin(i);(t._this_child0_highlight$child0=n).$c(t.$c$_this_child0_highlight$child0={}),i.addChild(n),e.highlight=i,e._setId("mosaicGrid"),this.addChild(e)},qe.$s=function(t){var e=this;Ye.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("delegateRadius",function(){e.delegateRadius=10*e._context.virtualScale},[e._context,"virtualScale"]),e._removeUpdater("name"),e.name="mosaic",e.anchors._removeUpdater("fill"),e.anchors.fill=e.parent;var i=t._this$child0;i.$s(t.$c$_this$child0),delete t.$c$_this$child0,i._removeUpdater("keyProcessDelay"),i.keyProcessDelay=300,i._replaceUpdater("delegateRadius",function(){i.delegateRadius=i.parent.delegateRadius},[i.parent,"delegateRadius"]);var n=t._this_child0$highlight;n.$s(t.$c$_this_child0$highlight),delete t.$c$_this_child0$highlight,n._replaceUpdater("z",function(){n.z=n.display?1:0},[n,"display"]),n._replaceUpdater("radius",function(){n.radius=n.parent.delegateRadius},[n.parent,"delegateRadius"]),n.on("clicked",function(){var t=this._get("mosaicGrid",!0);t.play(t.currentIndex)}.bind(n));var o=t._this_child0_highlight$child0;o.$s(t.$c$_this_child0_highlight$child0),delete t.$c$_this_child0_highlight$child0,o.completed();var r=new P.Animation(n),a={behavior__this_child0_highlight_on_y:r};r.$c(a.$c$behavior__this_child0_highlight_on_y={}),(r=a.behavior__this_child0_highlight_on_y).$s(a.$c$behavior__this_child0_highlight_on_y),delete a.$c$behavior__this_child0_highlight_on_y,r._removeUpdater("duration"),r.duration=300,r.completed(),n.setAnimation("y",r);var s=new P.Animation(n),c={behavior__this_child0_highlight_on_x:s};s.$c(c.$c$behavior__this_child0_highlight_on_x={}),(s=c.behavior__this_child0_highlight_on_x).$s(c.$c$behavior__this_child0_highlight_on_x),delete c.$c$behavior__this_child0_highlight_on_x,s._removeUpdater("duration"),s.duration=300,s.completed(),n.setAnimation("x",s);var h=new P.Animation(n),l={behavior__this_child0_highlight_on_height:h};h.$c(l.$c$behavior__this_child0_highlight_on_height={}),(h=l.behavior__this_child0_highlight_on_height).$s(l.$c$behavior__this_child0_highlight_on_height),delete l.$c$behavior__this_child0_highlight_on_height,h._removeUpdater("duration"),h.duration=300,h.completed(),n.setAnimation("height",h);var d=new P.Animation(n),p={behavior__this_child0_highlight_on_width:d};d.$c(p.$c$behavior__this_child0_highlight_on_width={}),(d=p.behavior__this_child0_highlight_on_width).$s(p.$c$behavior__this_child0_highlight_on_width),delete p.$c$behavior__this_child0_highlight_on_width,d._removeUpdater("duration"),d.duration=300,d.completed(),n.setAnimation("width",d),n.completed(),i._replaceUpdater("height",function(){i.height=.95*i.parent.height},[i.parent,"height"]),i._replaceUpdater("width",function(){i.width=.9*i.parent.width},[i.parent,"width"]),i._removeUpdater("animationDuration"),i.animationDuration=300,i._replaceUpdater("y",function(){i.y=.05*i.parent.height},[i.parent,"height"]),i._replaceUpdater("x",function(){i.x=.05*i.parent.width},[i.parent,"width"]),i.focusIndex=function(t){var e=this.model.get(t);this.highlight.showAndPlay(e.video)}.bind(i),i.on("itemFocused",function(t){this.focusIndex(t)}.bind(i)),i.onChanged("currentIndex",function(t){this.highlight.hide()}.bind(i)),i.onPressed("Back",function(t,e){this.focusIndex(this.currentIndex)}.bind(i)),i.completed(),e.completed()};var Ge=P.Object,Ke=Ge.prototype,Ze=P.Effects=function(t,e){Ge.apply(this,arguments)},Je=Ze.prototype=Object.create(Ke);Je.constructor=Ze,Je.componentName="core.Effects",y.addProperty(Je,"real","blur"),y.addProperty(Je,"real","grayscale"),y.addProperty(Je,"real","sepia"),y.addProperty(Je,"real","brightness"),y.addProperty(Je,"real","contrast"),y.addProperty(Je,"real","hueRotate"),y.addProperty(Je,"real","invert"),y.addProperty(Je,"real","saturate"),y.addLazyProperty(Je,"shadow",function(t,e){var i=new P.Shadow(t,e),n={lazy$shadow:i};return i.$c(n.$c$lazy$shadow={}),(i=n.lazy$shadow).$s(n.$c$lazy$shadow),delete n.$c$lazy$shadow,i.completed(),i}),Je._getFilterStyle=function(){var t=[];return this._addStyle(t,"blur","blur","px"),this._addStyle(t,"grayscale"),this._addStyle(t,"sepia"),this._addStyle(t,"brightness"),this._addStyle(t,"contrast"),this._addStyle(t,"hueRotate","hue-rotate","deg"),this._addStyle(t,"invert"),this._addStyle(t,"saturate"),t},Je._addStyle=function(t,e,i,n){var o=this[e];o&&t.push((i||e)+"("+o+(n||"")+") ")},Je._updateStyle=function(t){var e=this._getFilterStyle().join(""),i=this.parent,n={};n["-webkit-filter"]=e,n.filter=e,!this.shadow||this.shadow._empty()&&!t||(n["box-shadow"]=this.shadow._getFilterStyle()),i.style(n)};I=function(t){this._updateStyle()};P._protoOnChanged(Je,"saturate",I),P._protoOnChanged(Je,"brightness",I),P._protoOnChanged(Je,"grayscale",I),P._protoOnChanged(Je,"sepia",I),P._protoOnChanged(Je,"invert",I),P._protoOnChanged(Je,"hueRotate",I),P._protoOnChanged(Je,"contrast",I),P._protoOnChanged(Je,"blur",I),Je.$c=function(t){Ke.$c.call(this,t.$b={})},Je.$s=function(t){Ke.$s.call(this,t.$b),delete t.$b,this.completed()};var Qe=P.Item,ti=Qe.prototype,ei=P.Context=function(t,e){Qe.apply(this,arguments),this.options=arguments[2],this.l10n=this.options.l10n||{},((this._local.context=this)._context=this)._started=!1,this._completed=!1,this._processingActions=!1,this._delayedActions=[],this._completedObjects=[],this._stylesRegistered={},this._asyncInvoker=P.safeCall(this,[],function(t){log("async action failed:",t,t.stack)}),this.backend=k._backend(),this._init()},ii=ei.prototype=Object.create(ti);ii.constructor=ei,ii.componentName="core.Context",ii.message=P.createSignal("message"),y.addProperty(ii,"int","scrollY"),y.addProperty(ii,"int","keyProcessDelay"),y.addProperty(ii,"bool","fullscreen"),y.addProperty(ii,"string","language"),y.addProperty(ii,"System","system"),y.addProperty(ii,"Location","location"),y.addProperty(ii,"Stylesheet","stylesheet"),y.addProperty(ii,"string","buildIdentifier"),y.addProperty(ii,"int","virtualWidth",$manifest$virtual$width),y.addProperty(ii,"int","virtualHeight",$manifest$virtual$height),y.addProperty(ii,"real","virtualScale"),ii._processActions=function(){if(this._started&&!this._processingActions){this._processingActions=!0;for(var t=this._asyncInvoker;this._delayedActions.length||this._completedObjects.length;){var e=this._delayedActions;this._delayedActions=[];for(var i=0,n=e.length;i<n;++i)t(e[i]);var o=this._completedObjects;this._completedObjects=[];for(i=0,n=o.length;i<n;++i){var r=o[i];try{r.__complete()}catch(t){log("onCompleted failed",t,t.stack)}}}this._processingActions=!1,this.backend.tick(this)}},ii._init=function(){log("Context: initializing..."),new this.backend.init(this)},ii._run=function(){log("Context: signalling layout"),this.visibleInView=!0,this.newBoundingBox(),log("Context: calling completed()"),this._started=!0,this._processActions(),this._completed=!0},ii.init=function(){this.__init(),this.backend.initSystem(this.system)},ii.run=function(){this.backend.run(this,this._run.bind(this))},ii.scheduleComplete=function(){this._get("context",!0);this.delayedAction("context:completed",this,this._processActions)},ii.tr=function(){return this.qsTr.apply(this,arguments)},ii.scheduleAction=function(t){this._delayedActions.push(t)},ii.wrapNativeCallback=function(e){var i=this;return function(){try{var t=e.apply(this,arguments);return i._processActions(),t}catch(t){throw i._processActions(),t}}},ii.start=function(t){return this.children.push(t),t.__init(),log("Context: created instance"),t},ii.registerStyle=function(t,e,i){var n=(i=this.mangleClass(i))?e+"."+i:e;n in this._stylesRegistered||(t.registerStyle(this.stylesheet,n),this._stylesRegistered[n]=!0)},ii.processKey=function(t,e){for(var i=y.forEach(this,P.Item.prototype._enqueueNextChildInFocusChain,[]),n=i.length,o=0;o<n;++o){if(i[o]._processKey(t,e))return!0}return!1},ii.updateL10n=function(t,e){this.l10n[t]=e,this.__properties.language.callOnChanged(this,"language",this.language,this.language)},ii.mangleClass=function(t){return $manifest$html5$prefix+t},ii.delayedAction=function(t,e,i,n){var o;e._registerDelayedAction(t)&&(o=function(){e._cancelDelayedAction(t),i.call(e)},0<n?setTimeout(this.wrapNativeCallback(o),n):0===n?this.backend.requestAnimationFrame(this.wrapNativeCallback(o)):this.scheduleAction(o))},ii.__onCompleted=function(t){this._completedObjects.push(t)},ii.createElement=function(t,e){return this.backend.createElement(this,t,e)},ii.qsTr=function(t){var i=arguments,e=this.language,n=(this.l10n[e]||{})[t]||{};for(var o in n){t=n[o];break}return t.replace(/%(\d+)/,function(t,e){return i[e]})},P._protoOnChanged(ii,"fullscreen",function(t){t?this.backend.enterFullscreenMode(this.element):this.backend.exitFullscreenMode()}),ii.$c=function(t){var e=this;ti.$c.call(this,t.$b={});var i=new r.Stylesheet(e);(t._this$stylesheet=i).$c(t.$c$_this$stylesheet={}),e.stylesheet=i;var n=new P.System(e);(t._this$system=n).$c(t.$c$_this$system={}),e.system=n;var o=new P.Location(e);(t._this$location=o).$c(t.$c$_this$location={}),e.location=o},ii.$s=function(t){var e=this;ti.$s.call(this,t.$b),delete t.$b;var i=t._this$stylesheet;i.$s(t.$c$_this$stylesheet),delete t.$c$_this$stylesheet,i.completed(),e._replaceUpdater("virtualScale",function(){e.virtualScale=Math.min((e.system.resolutionWidth||e.width)/e.virtualWidth,(e.system.resolutionHeight||e.height)/e.virtualHeight)},[e.system,"resolutionWidth",e,"virtualHeight",e,"height",e,"virtualWidth",e,"width",e.system,"resolutionHeight"]);var n=t._this$system;n.$s(t.$c$_this$system),delete t.$c$_this$system,n.completed(),e._removeUpdater("visibleInView"),e.visibleInView=!1;var o=t._this$location;o.$s(t.$c$_this$location),delete t.$c$_this$location,o.completed(),e.completed()};var ni=P.Object,oi=ni.prototype,ri=P.Transform=function(t,e){ni.apply(this,arguments),this._transforms=new P.transform.Transform},ai=ri.prototype=Object.create(oi);ai.constructor=ri,ai.componentName="core.Transform",y.addProperty(ai,"int","perspective"),y.addProperty(ai,"int","translateX"),y.addProperty(ai,"int","translateY"),y.addProperty(ai,"int","translateZ"),y.addProperty(ai,"real","rotateX"),y.addProperty(ai,"real","rotateY"),y.addProperty(ai,"real","rotateZ"),y.addProperty(ai,"real","rotate"),y.addProperty(ai,"real","scaleX"),y.addProperty(ai,"real","scaleY"),y.addProperty(ai,"real","skewX"),y.addProperty(ai,"real","skewY"),ai._updateTransform=function(){this.parent.style("transform",this._transforms)},ai._animateAll=function(i){var n=this;["perspective","translateX","translateY","translateZ","rotateX","rotateY","rotateZ","rotate","scaleX","scaleY","skewX","skewY"].forEach(function(t){var e=new P.Animation(n);P.core.createObject(e),e.delay=i.delay,e.duration=i.duration,e.cssTransition=!1,e.easing=i.easing,n.setAnimation(t,e)}),this._context._processActions()},P._protoOnChanged(ai,"perspective",function(t){this._transforms.add("perspective",t,"px"),this._updateTransform()}),P._protoOnChanged(ai,"rotate",function(t){this._transforms.add("rotate",t,"deg"),this._updateTransform()}),P._protoOnChanged(ai,"rotateX",function(t){this._transforms.add("rotateX",t,"deg"),this._updateTransform()}),P._protoOnChanged(ai,"rotateY",function(t){this._transforms.add("rotateY",t,"deg"),this._updateTransform()}),P._protoOnChanged(ai,"rotateZ",function(t){this._transforms.add("rotateZ",t,"deg"),this._updateTransform()}),P._protoOnChanged(ai,"scaleX",function(t){this._transforms.add("scaleX",t),this._updateTransform()}),P._protoOnChanged(ai,"scaleY",function(t){this._transforms.add("scaleY",t),this._updateTransform()}),P._protoOnChanged(ai,"skewX",function(t){this._transforms.add("skewX",t,"deg"),this._updateTransform()}),P._protoOnChanged(ai,"skewY",function(t){this._transforms.add("skewY",t,"deg"),this._updateTransform()}),P._protoOnChanged(ai,"translateX",function(t){this._transforms.add("translateX",t,"px"),this._updateTransform()}),P._protoOnChanged(ai,"translateY",function(t){this._transforms.add("translateY",t,"px"),this._updateTransform()}),P._protoOnChanged(ai,"translateZ",function(t){this._transforms.add("translateZ",t,"px"),this._updateTransform()}),ai.$c=function(t){oi.$c.call(this,t.$b={})},ai.$s=function(t){oi.$s.call(this,t.$b),delete t.$b,this.completed()};var si=P.Object,ci=si.prototype,hi=P.BorderSide=function(t,e){si.apply(this,arguments)},li=hi.prototype=Object.create(ci);li.constructor=hi,li.componentName="core.BorderSide",y.addProperty(li,"string","name"),y.addProperty(li,"int","width"),y.addProperty(li,"color","color"),y.addProperty(li,"int","style"),li._updateStyle=function(){if(this.parent&&this.parent.parent&&this.name){var t;P.Border;switch(this.style){case k.core.Border.prototype.None:t="none";break;case k.core.Border.prototype.Hidden:t="hidden";break;case k.core.Border.prototype.Dotted:t="dotted";break;case k.core.Border.prototype.Dashed:t="dashed";break;case k.core.Border.prototype.Solid:t="solid";break;case k.core.Border.prototype.Double:t="double";break;case k.core.Border.prototype.Groove:t="groove";break;case k.core.Border.prototype.Ridge:t="ridge";break;case k.core.Border.prototype.Inset:t="inset";break;case k.core.Border.prototype.Outset:t="outset"}var e=this.width+"px "+t+" "+P.Color.normalize(this.color);this.parent.parent.style("border-"+this.name,e)}};I=function(t){this._updateStyle()};P._protoOnChanged(li,"width",I),P._protoOnChanged(li,"color",I),P._protoOnChanged(li,"style",I),li.$c=function(t){ci.$c.call(this,t.$b={})},li.$s=function(t){var e=this;ci.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("color",function(){e.color=e.parent.color},[e.parent,"color"]),e._replaceUpdater("width",function(){e.width=e.parent.width},[e.parent,"width"]),e._replaceUpdater("style",function(){e.style=e.parent.style},[e.parent,"style"]),e.completed()};var di=P.Object,pi=di.prototype,ui=P.Model=function(t,e){di.apply(this,arguments)},fi=ui.prototype=Object.create(pi);fi.constructor=ui,fi.componentName="core.Model",fi.reset=P.createSignal("reset"),fi.rowsChanged=P.createSignal("rowsChanged"),fi.rowsRemoved=P.createSignal("rowsRemoved"),fi.rowsInserted=P.createSignal("rowsInserted"),y.addProperty(fi,"int","count"),fi.$c=function(t){pi.$c.call(this,t.$b={})},fi.$s=function(t){pi.$s.call(this,t.$b),delete t.$b,this.completed()};var gi=P.Model,_i=gi.prototype,mi=P.ListModel=function(t,e){gi.apply(this,arguments),this._rows=[]},vi=mi.prototype=Object.create(_i);vi.constructor=mi,vi.componentName="core.ListModel",y.addProperty(vi,"array","data"),vi.clear=function(){this.assign([])},vi.forEach=function(t){return this._rows.forEach(t)},vi.addChild=function(t){this.append(t)},vi.get=function(t){if(t<0||t>=this._rows.length)throw new Error("index "+t+" out of bounds ("+this._rows.length+")");var e=this._rows[t];if(!(e instanceof Object))throw new Error("row is non-object");return e.index=t,e},vi.remove=function(t,e){if(t<0||t>=this._rows.length)throw new Error("index "+t+" out of bounds");void 0===e&&(e=1),this._rows.splice(t,e),this.count=this._rows.length,this.rowsRemoved(t,t+e)},vi.setProperty=function(t,e,i){if(t<0||t>=this._rows.length)throw new Error("index "+t+" out of bounds ("+this._rows.length+")");var n=this._rows[t];if(!(n instanceof Object))throw new Error("row is non-object, invalid index? ("+t+")");n[e]!==i&&(n[e]=i,this.rowsChanged(t,t+1))},vi.insert=function(t,e){if(t<0||t>this._rows.length)throw new Error("index "+t+" out of bounds ("+this._rows.length+")");this._rows.splice(t,0,e),this.count=this._rows.length,this.rowsInserted(t,t+1)},vi.set=function(t,e){if(t<0||t>=this._rows.length)throw new Error("index "+t+" out of bounds ("+this._rows.length+")");if(!(e instanceof Object))throw new Error("row is non-object");this._rows[t]=e,this.rowsChanged(t,t+1)},vi.append=function(t){var e=this._rows.length;Array.isArray(t)?(Array.prototype.push.apply(this._rows,t),this.count=this._rows.length,this.rowsInserted(e,e+t.length)):(this._rows.push(t),this.count=this._rows.length,this.rowsInserted(e,e+1))},vi.assign=function(t){this._rows=t,this.count=this._rows.length,this.reset()},P._protoOnChanged(vi,"data",function(t){this.assign(t)}),vi.$c=function(t){_i.$c.call(this,t.$b={})},vi.$s=function(t){_i.$s.call(this,t.$b),delete t.$b,this.completed()};var yi=P.Object,bi=yi.prototype,$i=P.Location=function(t,e){yi.apply(this,arguments);var i=P.__locationBackend;if(!i)throw new Error("no backend found");this.impl=i().createLocation(this)},wi=$i.prototype=Object.create(bi);wi.constructor=$i,wi.componentName="core.Location",y.addProperty(wi,"string","hash"),y.addProperty(wi,"string","host"),y.addProperty(wi,"string","href"),y.addProperty(wi,"string","port"),y.addProperty(wi,"string","origin"),y.addProperty(wi,"string","hostname"),y.addProperty(wi,"string","pathname"),y.addProperty(wi,"string","protocol"),y.addProperty(wi,"string","search"),y.addProperty(wi,"Object","state"),wi.changeHref=function(t){this.impl.changeHref(t)},wi.pushState=function(t,e,i){this.impl.pushState(t,e,i)},wi.$c=function(t){bi.$c.call(this,t.$b={})},wi.$s=function(t){bi.$s.call(this,t.$b),delete t.$b,this.completed()};var xi=P.Item,Ci=xi.prototype,ki=P.Image=function(t,e){xi.apply(this,arguments),this._context.backend.initImage(this),this._scheduleLoad()},Pi=ki.prototype=Object.create(Ci);Pi.constructor=ki,Pi.componentName="core.Image",y.addProperty(Pi,"int","paintedWidth"),y.addProperty(Pi,"int","paintedHeight"),y.addProperty(Pi,"int","sourceWidth"),y.addProperty(Pi,"int","sourceHeight"),y.addProperty(Pi,"string","source"),y.addProperty(Pi,"bool","smooth",!0),y.addProperty(Pi,"bool","preload",!1),Pi.Null=0,ki.Null=0,Pi.Ready=1,ki.Ready=1,Pi.Loading=2,ki.Loading=2,Pi.Error=3,ki.Error=3,y.addProperty(Pi,"enum","status"),Pi.AlignHCenter=0,ki.AlignHCenter=0,Pi.AlignLeft=1,ki.AlignLeft=1,Pi.AlignRight=2,ki.AlignRight=2,y.addProperty(Pi,"enum","horizontalAlignment"),Pi.Stretch=0,ki.Stretch=0,Pi.PreserveAspectFit=1,ki.PreserveAspectFit=1,Pi.PreserveAspectCrop=2,ki.PreserveAspectCrop=2,Pi.Tile=3,ki.Tile=3,Pi.TileVertically=4,ki.TileVertically=4,Pi.TileHorizontally=5,ki.TileHorizontally=5,Pi.Pad=6,ki.Pad=6,y.addProperty(Pi,"enum","fillMode"),Pi.AlignVCenter=0,ki.AlignVCenter=0,Pi.AlignTop=1,ki.AlignTop=1,Pi.AlignBottom=2,ki.AlignBottom=2,y.addProperty(Pi,"enum","verticalAlignment"),Pi._scheduleLoad=function(){(this.preload||this.recursiveVisible)&&this._context.delayedAction("image.load",this,this._load)},Pi._load=function(){var t,e;this.status!==this.Ready&&(this.preload||this.recursiveVisible)&&(this.source?(this.status=this.Loading,t=this._context,e=this._imageLoaded.bind(this),t.backend.loadImage(this,t.wrapNativeCallback(e))):this._resetImage())},Pi._onError=function(){this.status=this.Error},Pi._resetImage=function(){this.style("background-image","")},Pi.getClass=function(){return"core-image"},Pi._imageLoaded=function(t){if(t){var e={"background-image":'url("'+this.source+'")'},i=t.width,n=t.height;switch(this.sourceWidth=i,this.sourceHeight=n,this.fillMode!==ki.PreserveAspectFit&&(this.paintedWidth=this.width,this.paintedHeight=this.height),this.horizontalAlignment){case ki.AlignHCenter:e["background-position-x"]="center";break;case ki.AlignLeft:e["background-position-x"]="left";break;case ki.AlignRight:e["background-position-x"]="right"}switch(this.verticalAlignment){case ki.AlignVCenter:e["background-position-y"]="center";break;case ki.AlignTop:e["background-position-y"]="top";break;case ki.AlignBottom:e["background-position-y"]="bottom"}switch(this.fillMode){case ki.Stretch:e["background-repeat"]="no-repeat",e["background-size"]="100% 100%";break;case ki.TileVertically:e["background-repeat"]="repeat-y",e["background-size"]="100% "+n+"px";break;case ki.TileHorizontally:e["background-repeat"]="repeat-x",e["background-size"]=i+"px 100%";break;case ki.Tile:e["background-repeat"]="repeat-y repeat-x",e["background-size"]="auto";break;case ki.PreserveAspectCrop:e["background-repeat"]="no-repeat",e["background-size"]="cover";break;case ki.Pad:e["background-repeat"]="no-repeat",e["background-position"]="0% 0%",e["background-size"]="auto";break;case ki.PreserveAspectFit:e["background-repeat"]="no-repeat",e["background-size"]="contain";var o=this.width,r=this.height,a=0,s=i/n;o&&r&&(a=o/r),a<s&&o?(this.paintedWidth=o,this.paintedHeight=o/s):(this.paintedHeight=r,this.paintedWidth=r*s)}e["image-rendering"]=this.smooth?"auto":"pixelated",this.style(e),this.status=ki.Ready}else this.status=ki.Error};I=function(t){this._scheduleLoad()};P._protoOnChanged(Pi,"width",I),P._protoOnChanged(Pi,"preload",I),P._protoOnChanged(Pi,"height",I),P._protoOnChanged(Pi,"recursiveVisible",I),P._protoOnChanged(Pi,"fillMode",I),P._protoOnChanged(Pi,"source",function(t){this.status=this.Null,this._scheduleLoad()}),Pi.$c=function(t){Ci.$c.call(this,t.$b={})},Pi.$s=function(t){var e=this;Ci.$s.call(this,t.$b),delete t.$b,e._replaceUpdater("width",function(){e.width=e.sourceWidth},[e,"sourceWidth"]),e._replaceUpdater("height",function(){e.height=e.sourceHeight},[e,"sourceHeight"]),e.completed()};var Ai=P.Object,Oi=Ai.prototype,Si=P.Anchors=function(t,e){Ai.apply(this,arguments),this._items=[],this._grabX=!1,this._grabY=!1},Ii=Si.prototype=Object.create(Oi);Ii.constructor=Si,Ii.componentName="core.Anchors",y.addProperty(Ii,"AnchorLine","bottom"),y.addProperty(Ii,"AnchorLine","verticalCenter"),y.addProperty(Ii,"AnchorLine","top"),y.addProperty(Ii,"AnchorLine","left"),y.addProperty(Ii,"AnchorLine","horizontalCenter"),y.addProperty(Ii,"AnchorLine","right"),y.addProperty(Ii,"Item","fill"),y.addProperty(Ii,"Item","centerIn"),y.addProperty(Ii,"int","margins"),y.addProperty(Ii,"int","bottomMargin"),y.addProperty(Ii,"int","topMargin"),y.addProperty(Ii,"int","leftMargin"),y.addProperty(Ii,"int","rightMargin"),Ii._scheduleUpdate=function(){this._context.delayedAction("update-anchors",this,this._updateAll)},Ii._updateAll=function(){var t,e,i,n,o,r,a,s,c,h,l,d,p,u,f,g,_,m,v,y,b,$,w,x,C=this,k=C.parent;null!==k&&(e=(t=k.parent.toScreen())[0],i=t[1],n=C.fill,o=C._getAnchor("left")||(n?n.left:null),r=C._getAnchor("right")||(n?n.right:null),a=C._getAnchor("top")||(n?n.top:null),s=C._getAnchor("bottom")||(n?n.bottom:null),c=C.centerIn,h=C._getAnchor("horizontalCenter")||(c?c.horizontalCenter:null),l=C._getAnchor("verticalCenter")||(c?c.verticalCenter:null),d=C.leftMargin||C.margins,p=C.rightMargin||C.margins,u=C.topMargin||C.margins,f=C.bottomMargin||C.margins,g=[],_=[],m=function(t){var e,i=t[0],n=t[1],o=g.indexOf(i);return o<0?(e=i.toScreen(),g.push(i),_.push(e)):e=_[o],e[n]},o&&r?(v=m(o),b=m(r),k.x=v+d-e-k.viewX,k.width=b-v-p-d):o&&h?(v=m(o),w=m(h),k.x=v+d-e-k.viewX,k.width=2*(w-v)-p-d):h&&r?(w=m(h),b=m(r),k.width=2*(b-w)-p-d,k.x=w-(k.width+d-p)/2-e-k.viewX):o?(v=m(o),k.x=v+d-e-k.viewX):r?(b=m(r),k.x=b-e-p-k.width-k.viewX):h?(w=m(h),k.x=w-(k.width+d-p)/2-e-k.viewX):this._grabX&&(k.x=d),a&&s?(y=m(a),$=m(s),k.y=y+u-i-k.viewY,k.height=$-y-f-u):a&&l?(y=m(a),x=m(l),k.y=y+u-i-k.viewY,k.height=2*(x-y)-f-u):l&&s?(x=m(l),$=m(s),k.height=2*($-x)-f-u,k.y=x-(k.height+u-f)/2-i-k.viewY):a?(y=m(a),k.y=y+u-i-k.viewY):s?($=m(s),k.y=$-i-f-k.height-k.viewY):l?(x=m(l),k.y=x-(k.height+u-f)/2-i-k.viewY):this._grabY&&(k.y=u))},Ii._grab=function(t,e){"x"===e&&(this._grabX=!0),"y"===e&&(this._grabY=!0),t._removeUpdater(e)},Ii._getAnchor=function(t){var e=this[t];return e?Array.isArray(e)?e:e[t]:null},Ii._subscribe=function(t){var e=this._items;e.indexOf(t)<0&&(e.push(t),this.connectOn(t,"newBoundingBox",this._scheduleUpdate.bind(this)))},P._protoOnChanged(Ii,"fill",function(t){var e;this._scheduleUpdate(),null!==t&&(e=this.parent,this._grab(e,"x"),this._grab(e,"width"),this._grab(e,"y"),this._grab(e,"height"),this._subscribe(t))}),P._protoOnChanged(Ii,"centerIn",function(t){var e;this._scheduleUpdate(),null!==t&&(e=this.parent,this._grab(e,"x"),this._grab(e,"y"),this._subscribe(t),this._subscribe(e))}),P._protoOnChanged(Ii,"bottom",function(t){this._scheduleUpdate();var e,i=this._getAnchor("bottom");null!==i&&(e=this.parent,this._grab(e,"y"),(this.top||this.verticalCenter)&&this._grab(e,"height"),this._subscribe(e),this._subscribe(i[0]))}),P._protoOnChanged(Ii,"horizontalCenter",function(t){this._scheduleUpdate();var e,i=this._getAnchor("horizontalCenter");null!==i&&(e=this.parent,this._grab(e,"x"),(this.left||this.right)&&this._grab(e,"width"),this._subscribe(e),this._subscribe(i[0]))}),P._protoOnChanged(Ii,"left",function(t){this._scheduleUpdate();var e,i=this._getAnchor("left");null!==i&&(e=this.parent,this._grab(e,"x"),(this.right||this.horizontalCenter)&&(this._grab(e,"width"),this._subscribe(e)),this._subscribe(i[0]))}),P._protoOnChanged(Ii,"right",function(t){this._scheduleUpdate();var e,i=this._getAnchor("right");null!==i&&(e=this.parent,this._grab(e,"x"),(this.left||this.horizontalCenter)&&this._grab(e,"width"),this._subscribe(e),this._subscribe(i[0]))}),P._protoOnChanged(Ii,"top",function(t){this._scheduleUpdate();var e,i=this._getAnchor("top");null!==i&&(e=this.parent,this._grab(e,"y"),(this.bottom||this.verticalCenter)&&(this._grab(e,"height"),this._subscribe(e)),this._subscribe(i[0]))}),P._protoOnChanged(Ii,"verticalCenter",function(t){this._scheduleUpdate();var e,i=this._getAnchor("verticalCenter");null!==i&&(e=this.parent,this._grab(e,"y"),(this.top||this.bottom)&&this._grab(e,"height"),this._subscribe(e),this._subscribe(i[0]))});I=function(t){this.parent.anchorsMarginsUpdated(),this._scheduleUpdate()};P._protoOnChanged(Ii,"bottomMargin",I),P._protoOnChanged(Ii,"leftMargin",I),P._protoOnChanged(Ii,"topMargin",I),P._protoOnChanged(Ii,"rightMargin",I),P._protoOnChanged(Ii,"margin",I),Ii.$c=function(t){Oi.$c.call(this,t.$b={})},Ii.$s=function(t){Oi.$s.call(this,t.$b),delete t.$b,this.completed()};var Ti=P.Object,Ui=Ti.prototype,Ei=P.Gradient=function(t,e){Ti.apply(this,arguments),this.stops=[]},Li=Ei.prototype=Object.create(Ui);Li.constructor=Ei,Li.componentName="core.Gradient",y.addProperty(Li,"real","angle"),Li.Vertical=0,Ei.Vertical=0,Li.Horizontal=1,Ei.Horizontal=1,Li.BottomRight=2,Ei.BottomRight=2,Li.TopRight=3,Ei.TopRight=3,Li.Custom=4,Ei.Custom=4,y.addProperty(Li,"enum","orientation"),Li._updateStyle=function(){var t=this._getDeclaration();t&&this.parent.style({"background-color":"",background:t})},Li._getDeclaration=function(){var t,e=this.stops,i=e.length;if(!(i<2)){switch(this.orientation){default:case this.Vertical:t="to bottom";break;case this.Horizontal:t="to left";break;case this.BottomRight:t="to bottom right";break;case this.TopRight:t="to top right";break;case this.Custom:t=this.angle+"deg"}for(var n=new P.gradient.Gradient(t),o=0;o<i;++o){var r=e[o];n.add(r._getDeclaration())}return n}},Li.__complete=function(){Ui.__complete.call(this),this._updateStyle()},Li.addChild=function(t){P.Object.prototype.addChild.apply(this,arguments),t instanceof P.GradientStop&&(this.stops.push(t),this.stops.sort(function(t,e){return t.position>e.position}),this._updateStyle())},Li.$c=function(t){Ui.$c.call(this,t.$b={})},Li.$s=function(t){Ui.$s.call(this,t.$b),delete t.$b,this.completed()};var zi=P.Object,Mi=zi.prototype,Ri=P.ClickMixin=function(t,e){zi.apply(this,arguments),this.element=this.parent.element,this._bindClick(this.enabled)},Hi=Ri.prototype=Object.create(Mi);Hi.constructor=Ri,Hi.componentName="core.ClickMixin",y.addProperty(Hi,"bool","enabled",!0),Hi._bindClick=function(t){t&&!this._cmClickBinder&&(this._cmClickBinder=new P.EventBinder(this.element),this._cmClickBinder.on("click",P.createSignalForwarder(this.parent,"clicked").bind(this))),this._cmClickBinder&&this._cmClickBinder.enable(t)},P._protoOnChanged(Hi,"enabled",function(t){this._bindClick(t)}),Hi.$c=function(t){Mi.$c.call(this,t.$b={})},Hi.$s=function(t){Mi.$s.call(this,t.$b),delete t.$b,this.completed()};var ji=i.Rest,Ni=ji.prototype,Bi=s.AnotherApi=function(t,e){ji.apply(this,arguments)},Vi=Bi.prototype=Object.create(Ni);Vi.constructor=Bi,Vi.componentName="src.AnotherApi",Vi.$c=function(t){Ni.$c.call(this,t.$b={});var e=new i.Method(this);(t._this$child0=e).$c(t.$c$_this$child0={}),this.addChild(e)},Vi.$s=function(t){Ni.$s.call(this,t.$b),delete t.$b,this._removeUpdater("baseUrl"),this.baseUrl="https://ctx.playfamily.ru";var e=t._this$child0;e.$s(t.$c$_this$child0),delete t.$c$_this$child0,e._removeUpdater("path"),e.path="/screenapi/v1/noauth/collection/web/1?elementAlias=topfilms&elementType=COLLECTION&limit=16&offset=0&withInnerCollections=true",e._removeUpdater("name"),e.name="getMain",e.completed(),this.completed()};var Wi=P.EventEmitter,Fi=Wi.prototype,Di=P.RAIIEventEmitter=function(t,e){Wi.apply(this,arguments),this._onListener={}},Yi=Di.prototype=Object.create(Fi);Yi.constructor=Di,Yi.componentName="core.RAIIEventEmitter",Yi.removeAllListeners=function(t){P.EventEmitter.prototype.removeAllListeners.call(this,t),t in this._onListener?this._onListener[t][1](t):""in this._onListener&&this._onListener[""][1](t)},Yi.on=function(t,e){if(!(t in this._eventHandlers)&&(t in this._onListener?this._onListener[t][0](t):""in this._onListener&&this._onListener[""][0](t),this._eventHandlers[t]))throw new Error("listener callback added event handler");P.EventEmitter.prototype.on.call(this,t,e)},Yi.onListener=function(t,e,i){this._onListener[t]=[e,i]},Yi.$c=function(t){Fi.$c.call(this,t.$b={})},Yi.$s=function(t){Fi.$s.call(this,t.$b),delete t.$b,this.completed()};var Xi,qi,Gi,Ki,Zi,Ji=P.Object,Qi=Ji.prototype,tn=r.Stylesheet=function(t,e){Ji.apply(this,arguments);var i=this._context,n=i.options,o=this.style=i.createElement("style");o.dom.type="text/css",this.prefix=n.prefix;var r=n.id,a=null===document.getElementById(i,r),s=window.Modernizr.prefixedCSS("user-select")+": none; ",c=k.core.os,h="android"===c||"androidttk"===c||"hisense"===c;o.setHtml("div#"+r+" { position: absolute; visibility: hidden; left: 0px; top: 0px; }"+("webOS"===c||h?this.mangleRule("div","{ "+s+" }"):"")+(h?this.mangleRule("div","{ -webkit-tap-highlight-color: rgba(255, 255, 255, 0); -webkit-focus-ring-color: rgba(255, 255, 255, 0); outline: none; }"):"")+(a?"body { padding: 0; margin: 0; border: 0px; overflow: hidden; }":"")+this.mangleRule("video","{ position: absolute; }")+this.mangleRule("img","{ position: absolute; -webkit-touch-callout: none; "+s+" }"));var l=k.html5.html.getElement(i,"head");l.append(o),l.updateStyle(),this._addRule=k.html5.html.createAddRule(o.dom).bind(this),this._lastId=0},en=tn.prototype=Object.create(Qi);function nn(t){if(t&&t.name,this._storage=window.localStorage,!this._storage)throw new Error("no local storage support")}function on(t){this._ui=t;var e=window.location;this.updateActualValues();var i=this,n=t._context;n.window.on("hashchange",function(){i._ui.hash=e.hash}.bind(this)),n.window.on("popstate",function(){i.updateActualValues()}.bind(this))}function rn(t){var e=t._context.createElement("video");e.dom.preload="metadata",this.element=e,this.ui=t,this.setEventListeners(),t.element.remove(),t.element=e,t.parent.element.append(t.element),this._xhr=new XMLHttpRequest,this._xhr.addEventListener("load",this.parseManifest.bind(this))}function an(t){var e,i,n=t._context;$manifest$system$fingerprint?(e=new r.fingerprint.fingerprint.Fingerprint,n.backend.fingerprint(n,e),t.deviceId=e.finalize(),log("deviceId",t.deviceId)):(i=(i=n.system.os+"_"+n.system.browser).replace(/\s/g,""),t.deviceId=i+"_"+Math.random().toString(36).substr(2,9))}return en.constructor=tn,en.componentName="html5.Stylesheet",en.allocateClass=function(t){var e=this.prefix;return(e||"")+t+"-"+this._lastId++},en.mangleSelector=function(t){var e=this.prefix;return e?t+"."+e+"core-item":t},en.mangleRule=function(t,e){return this.mangleSelector(t)+" "+e+" "},en.addRule=function(t,e){this._addRule(t,e)},en.$c=function(t){Qi.$c.call(this,t.$b={})},en.$s=function(t){Qi.$s.call(this,t.$b),delete t.$b,this.completed()},k.core.gradient=function(){function t(t,e){this.color=P.Color.normalize(t),this.position=e}var e={},i=t.prototype;i.constructor=t,i.toString=function(){return this.color+" "+Math.floor(100*this.position)+"%"};function n(t){this.orientation=t,this.stops=[]}var o=n.prototype;return o.constructor=n,o.add=function(t){this.stops.push(t)},o.toString=function(){return"linear-gradient("+this.orientation+","+this.stops.join()+")"},e.GradientStop=t,e.Gradient=n,e}(),k.core.model=function(){function h(t,e){this.type=t,this.length=e}var t={};t.ModelUpdate=function(){this.count=0,this._reset()},t.ModelUpdate.prototype.constructor=t.ModelUpdate,t.ModelUpdate.prototype._reset=function(){this._ranges=[new h(0,this.count)],this._updateIndex=this.count},t.ModelUpdate.prototype._setUpdateIndex=function(t){t<this._updateIndex&&(this._updateIndex=t)},t.ModelUpdate.prototype._find=function(t){for(var e=this._ranges,i=0;i<e.length;++i){var n=e[i];if(t<n.length)return{index:i,offset:t};0<n.length&&(t-=n.length)}if(0!=t)throw new Error("invalid index "+t);return{index:i-1,offset:n.length}},t.ModelUpdate.prototype.reset=function(t){this.update(t,0,Math.min(t.count,this.count)),this.count<t.count?this.insert(t,this.count,t.count):this.remove(t,t.count,this.count)},t.ModelUpdate.prototype._merge=function(){for(var t=this._ranges,e=1;e<t.length;){var i,n=t[e-1],o=t[e];n.type===o.type?1===n.type&&n.length<0&&0<o.length?(i=Math.min(-n.length,o.length),n.type=2,o.length+=n.length,n.length=i,1<e&&--e):(n.length+=o.length,t.splice(e,1)):1===n.type&&0===n.length?t.splice(e,1):++e}},t.ModelUpdate.prototype._split=function(t,e,i,n){var o=this._ranges;if(0===e)return o.splice(t,0,new h(i,n)),t+1;var r=o[t],a=r.length-e;return r.length=e,0!=a?o.splice(t+1,0,new h(i,n),new h(r.type,a)):o.splice(t+1,0,new h(i,n)),t+2},t.ModelUpdate.prototype.insert=function(t,e,i){if(!(i<=e)){this._setUpdateIndex(e);var n=this._ranges,o=i-e;if(this.count+=o,this.count!=t.count)throw new Error("unbalanced insert "+this.count+" + ["+e+"-"+i+"], model reported "+t.count);var r=this._find(e),a=n[r.index];0===a.length?(a.type=1,a.length+=o):0<=r.offset?this._split(r.index,r.offset,1,o):this._split(r.index+1,0,1,o),this._merge()}},t.ModelUpdate.prototype.remove=function(t,e,i){if(!(i<=e)){this._setUpdateIndex(e);var n=this._ranges,o=i-e;if(this.count-=o,this.count!=t.count)throw new Error("unbalanced remove "+this.count+" + ["+e+"-"+i+"], model reported "+t.count);var r=this._find(e),a=n[r.index];if(1===a.type)a.length-=o;else for(var s=this._split(r.index,r.offset,1,-o);0<o;){(a=n[s]).length<=o?(n.splice(s,1),o-=a.length):(a.length-=o,o=0)}this._merge()}},t.ModelUpdate.prototype.update=function(t,e,i){if(!(i<=e)){var n=this._ranges,o=i-e,r=this._find(e),a=r.index,s=n[a];if(0<r.offset&&(n.splice(a+1,0,new h(s.type,s.length-r.offset)),s.length=r.offset,++a,0===s.length))throw new Error("invalid offset");for(;0<o;){var c=(s=n[a]).length;switch(s.type){case 0:o<c?(s.length-=o,n.splice(a,0,new h(2,o))):s.type=2,o-=c;break;case 1:0<c&&(o-=c),++a;break;case 2:o-=c,++a}}this._merge()}},t.ModelUpdate.prototype.clear=function(){this.count=0,this._reset()},t.ModelUpdate.prototype.apply=function(i,t){var n=0;if(this._ranges.forEach(function(t){var e=t.length;switch(t.type){case 1:0<e?(i._insertItems(n,n+e),n+=e):e<0&&i._removeItems(n,n-e);break;case 2:i._updateItems(n,n+e),n+=e;break;default:n+=t.length}}),!t&&i._items.length!=this.count)throw new Error("unbalanced items update, view: "+i._items.length+", update:"+this.count);for(var e=this._updateIndex;e<this.count;++e)i._updateDelegateIndex(e);this._reset()};var e=t.ArrayModelWrapper=function(t){this.data=t,this.count=t.length};return e.prototype.get=function(t){return{value:this.data[t]}},e.prototype.on=function(){},e.prototype.removeListener=function(){},t}(),k.core.transform=function(){function n(t,e){this.value=t,this.unit=e}var t={},e=n.prototype;e.constructor=n,e.toString=function(){var t=this.unit;return null!=t?this.value+t:this.value};function i(){this.transforms={}}var o=i.prototype;return o.constructor=i,o.add=function(t,e,i){this.transforms[t]=new n(e,i)},o.toString=function(){var t=this.transforms,e="";for(var i in t){e+=i+"("+t[i]+") "}return e},t.Transform=i,t}(),k.html5.html=function(){var g={},p=window.Modernizr;g.capabilities={csstransforms3d:p.csstransforms3d,csstransforms:p.csstransforms,csstransitions:p.csstransitions,mouseEnterLeaveSupported:"netcast"!=k.core.os};var u=null;g.createAddRule=function(t){if((t.sheet||{}).insertRule){i=t.sheet;return function(e,t){try{i.insertRule(e+"{"+t+"}",i.cssRules.length)}catch(t){log("insertRule failed on rule "+e)}}}var i=t.styleSheet||t.sheet;return function(e,t){try{i.addRule(e,t)}catch(t){log("addRule failed on rule "+e)}}};function f(){this._cache={}}var t=f.prototype;t.constructor=f,t.update=function(t,e,i){var n,o=this._cache,r=t._uniqueId,a=o[r];void 0!==a?(a.data[e]=i,++a.size):((n={})[e]=i,o[r]={data:n,element:t,size:1})},t.pop=function(t){var e=t._uniqueId,i=this._cache[e];if(void 0!==i)return delete this._cache[e],i},t.apply=function(){var t=this._cache;for(var e in this._cache={},t){var i=t[e];i.element.updateStyle(i)}};function _(t){var e=document.createElement("style");e.type="text/css",document.head.appendChild(e),this.prefix=t+"C-",this.style=e,this.total=0,this.stats={},this.classes={},this.classes_total=0,this._addRule=g.createAddRule(e)}var e=_.prototype;e.constructor=_,e.add=function(t){this.stats[t]=(this.stats[t]||0)+1,++this.total},e.register=function(t){var e=t.join(";"),i=this.classes,n=i[e];return void 0!==n||(n=i[e]=this.prefix+this.classes_total++,this._addRule("."+n,e)),n},e.classify=function(i){var n=this.total;if(n<10)return"";i.sort();var o=[],r=[],a=this.stats;return i.forEach(function(t,e){.05<a[t]/n&&(o.push(t),r.push(e))}),r.length<2?"":(r.forEach(function(t,e){i.splice(t-e,1)}),this.register(o))};var i={};0<=k.core.userAgent.toLowerCase().indexOf("webkit")&&(i.appearance="-webkit-appearance");function h(t){var e=i[t];return void 0===e&&(i[t]=e=window.Modernizr.prefixedCSS(t)),e}g.getPrefixedName=h;function r(n){var o=n.__domEventListeners;void 0===o&&(o=n.__domEventListeners={}),n.onListener("",function(t){var e=o[t]=n._context.wrapNativeCallback(function(){n.emitWithArgs(t,arguments)}),i=[t,e];0<=a.indexOf(t)&&i.push(s),0<=c.indexOf(t)&&1===(n.__mouseHandlerCount=1+~~n.__mouseHandlerCount)&&n.style("pointer-events","auto"),0<=l.indexOf(t)&&1===(n.__touchHandlerCount=1+~~n.__touchHandlerCount)&&n.style("touch-action","auto"),n.dom.addEventListener.apply(n.dom,i)},function(t){0<=c.indexOf(t)&&(n.__mouseHandlerCount=~~n.__mouseHandlerCount-1)<=0&&n.style("pointer-events","none"),0<=l.indexOf(t)&&(n.__touchHandlerCount=~~n.__touchHandlerCount-1)<=0&&n.style("touch-action","none"),n.dom.removeEventListener(t,o[t])})}var a=["touchstart","touchmove","touchend","wheel","mousewheel","scroll"],s=!!p.passiveeventlisteners&&{passive:!0},c=["mousedown","mouseup","click","dblclick","mousemove","mouseover","mousewheel","mouseout","contextmenu","mouseenter","mouseleave"],l=["touchstart","touchmove","touchend","touchcancel"],n={};g.loadExternalStylesheet=function(t){var e;n[t]||((e=document.createElement("link")).setAttribute("rel","stylesheet"),e.setAttribute("href",t),document.head.appendChild(e),n[t]=!0)};var d=0,m={};function v(t){return $manifest$html5$prefix+t}g.Element=function(t,e,i){var n,o;"string"==typeof e?(void 0===i&&(i=""),m[n=e+"."+i]||(o=document.createElement(e),($manifest$html5$prefix||i)&&o.classList.add(v(i)),$manifest$html5$prefix&&i&&o.classList.add(v("")),m[n]=o),this.dom=m[n].cloneNode(!1)):this.dom=e,k.core.RAIIEventEmitter.apply(this),this._context=t,this._transitions={},this._class="",this._uniqueId=(++d).toString(36),this._firstChildIndex=0,r(this)};var o=g.Element.prototype=Object.create(k.core.RAIIEventEmitter.prototype);o.constructor=g.Element,o.addClass=function(t){this.dom.classList.add(t)},o.appendChildren=function(t){var e;0<t.length&&(e=document.createDocumentFragment(),t.forEach(function(t){e.appendChild(t)}),this.dom.appendChild(e))},o.removeChildren=function(t){var n=[],o=this.dom;return t.children.forEach(function(t){var e,i=t.element;void 0===i||(e=i.dom).parentNode===o&&(o.removeChild(e),n.push(e))}),n},o.setHtml=function(t,e){var i=this.dom,n=void 0!==e?this.removeChildren(e):[];i.innerHTML=t,this.appendChildren(n)},o.width=function(){return this.updateStyle(),this.dom.clientWidth},o.height=function(){return this.updateStyle(),this.dom.clientHeight},o.fullWidth=function(){return this.updateStyle(),this.dom.scrollWidth},o.fullHeight=function(){return this.updateStyle(),this.dom.scrollHeight};var y=["overflow","overflow-x","overflow-y"];o.style=function(t,e){var i=this._context._styleCache;if(void 0!==e)i.update(this,t,e),0<=y.indexOf(t)&&(i.update(this,"pointer-events","auto"),i.update(this,"touch-action","auto"));else{if("object"!=typeof t)throw new Error("cache is write-only");for(var n in t)0<=y.indexOf(t)&&(i.update(this,"pointer-events","auto"),i.update(this,"touch-action","auto")),i.update(this,n,t[n])}},o.setAttribute=function(t,e){return this.dom.setAttribute(t,e)},o.getAttribute=function(t){return this.dom.getAttribute(t)},o.setProperty=function(t,e){return this.dom[t]=e},o.getProperty=function(t){return this.dom[t]};var b={left:"px",top:"px",width:"px",height:"px","border-radius":"px","border-width":"px","margin-left":"px","margin-top":"px","margin-right":"px","margin-bottom":"px","padding-left":"px","padding-top":"px","padding-right":"px","padding-bottom":"px",padding:"px"};o.forceLayout=function(){return this.updateStyle(),this.dom.offsetWidth|this.dom.offsetHeight},o.updateStyle=function(t){var e=this.dom;if(e&&(void 0!==t||void 0!==(t=this._context._styleCache.pop(this)))){var i=t.data,n=e.style;for(var o in i){var r,a=i[o],s=h(o),c=!1!==s?s:o;a instanceof k.core.Color?a=a.rgba():Array.isArray(a)&&(a=a.join(",")),"number"!=typeof a||void 0!==(r=b[o])&&(a+=r),n[c]=a}}},o.append=function(t){this.dom.appendChild(t instanceof g.Element?t.dom:t)},o.prepend=function(t){this.dom.insertBefore(t instanceof g.Element?t.dom:t,this.dom.childNodes[0])},o.discard=function(){k.core.RAIIEventEmitter.prototype.discard.apply(this),this.remove()},o.remove=function(){var t=this.dom;t.parentNode&&t.parentNode.removeChild(t)},o.focus=function(){var t=this.dom;t.focus(),t.select()},o.blur=function(){this.dom.blur()},o.getScrollX=function(){return this.dom.scrollLeft},o.getScrollY=function(){return this.dom.scrollTop},g.Document=function(t,e){k.core.RAIIEventEmitter.apply(this),this._context=t,this.dom=e,r(this)},(g.Document.prototype=Object.create(k.core.RAIIEventEmitter.prototype)).constructor=g.Document,g.Window=function(t,e){k.core.RAIIEventEmitter.apply(this),this._context=t,this.dom=e,r(this)};var $=g.Window.prototype=Object.create(k.core.RAIIEventEmitter.prototype);$.constructor=g.Window,$.width=function(){return this.dom.innerWidth},$.height=function(){return this.dom.innerHeight},$.scrollY=function(){return this.dom.scrollY},$.style=function(){},g.getElement=function(t,e){var i=document.getElementsByTagName(e);if(1!=i.length)throw new Error("no tag "+e+"/multiple tags");return new g.Element(t,i[0])},g.init=function(n){u=new k.html5.cache.Cache(w),n._styleCache=new f;var t=n.options,e=n._prefix,i=t.id,o=t.tag||"div";e&&log("Context: using prefix",e+="-");var r=new k.html5.html.Document(n,document);n.document=r;var a=new k.html5.html.Window(n,window);n.window=a;var s,c,h=g,l=document.getElementById(i);null===l?(s=a.width(),c=a.height(),log("Context: window size: "+s+"x"+c),(l=h.createElement(n,o)).dom.id=i,a.on("resize",function(){n.width=a.width(),n.height=a.height()}),h.getElement(n,"body").append(l)):(s=(l=new h.Element(n,l)).width(),c=l.height(),log("Context: found element by id, size: "+s+"x"+c),a.on("resize",function(){n.width=l.width(),n.height=l.height()})),p.canvastext?(n._textCanvas=h.createElement(n,"canvas"),n._textCanvas.style("width",0),n._textCanvas.style("height",0),l.append(n._textCanvas),n._textCanvasContext="getContext"in n._textCanvas.dom?n._textCanvas.dom.getContext("2d"):null):n._textCanvasContext=null,n.element=l,n.width=s,n.height=c,a.on("scroll",function(t){n.scrollY=a.scrollY()});function d(t){var e=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;log("fullscreen change event:",e),n.fullscreen=e}new Array("webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange").forEach(function(t){l.on(t,d,!0)}),a.on("keydown",n.wrapNativeCallback(function(t){var e=t.which||t.keyCode,i=P.keyCodes[e];void 0!==i?n.processKey(i,t)&&t.preventDefault():log("unhandled keycode "+e+": ["+t.charCode+" "+t.keyCode+" "+t.which+" "+t.key+" "+t.code+" "+t.location+"]")})),a.on("orientationchange",function(t){log("orientation changed event"),n.system.screenWidth=window.screen.width,n.system.screenHeight=window.screen.height}),n._styleClassifier=$manifest$cssAutoClassificator?new _(n._prefix):null},g.initSystem=function(t){var e=t._context.window;e.on("focus",function(){t.pageActive=!0}),e.on("blur",function(){t.pageActive=!1}),t.screenWidth=window.screen.width,t.screenHeight=window.screen.height},g.createElement=function(t,e,i){return new g.Element(t,e,i)},g.initRectangle=function(t){};var w=function(t,e){var i=new Image;i.onerror=function(){i.onload=null,i.onerror=null,e(null)},i.onload=function(){i.onload=null,i.onerror=null,e({width:i.naturalWidth,height:i.naturalHeight})},i.src=t};g.initImage=function(t){},g.loadImage=function(t,e){t.source.indexOf("?")<0?u.get(t.source,e):w(t.source,e)},g.initText=function(t){};function x(t,e){switch(t.verticalAlignment){case t.AlignTop:t._topPadding=0;break;case t.AlignBottom:t._topPadding=t.height-t.paintedHeight;break;case t.AlignVCenter:t._topPadding=(t.height-t.paintedHeight)/2}e["padding-top"]=t._topPadding,e.height=t.height-t._topPadding,t.style(e)}g.setText=function(t,e){t.element.setHtml(e,t)},g.layoutText=function(t){var e=t._context._textCanvasContext,i=t.wrapMode!==k.core.Text.NoWrap,n=t.element,o=(n.dom,t.textFormat===t.Html||0<=t.text.search(/[\<\&]/));if(!i&&null!==e&&!o){var r=t.font,a=r.pointSize?Math.round(96*r.pointSize/72):r.pixelSize;e.font=a+"px "+r.family;var s=e.measureText(t.text);return t.paintedWidth=s.width,t.paintedHeight=a*r.lineHeight,void x(t,{})}var c=n.removeChildren(t);i?t.style({height:"auto","padding-top":0}):t.style({width:"auto",height:"auto","padding-top":0});var h,l=n.fullWidth()+1,d=n.fullHeight()+1;l+1!==t.paintedWidth&&(t.paintedWidth=l),d+1!==t.paintedHeight&&(t.paintedHeight=d),h=i?{}:{width:t.width},x(t,h),n.appendChildren(c)},g.run=function(e,t){e.window.on("message",function(t){log("Context: received message from "+t.origin,t),e.message(t)}),e.window.on($manifest$expectRunContextEvent?"runContext":"load",function(){t()})},g.tick=function(t){t._styleCache.apply()};var C={width:"width",height:"height",x:"left",y:"top",viewX:"left",viewY:"top",opacity:"opacity",border:"border",radius:"border-radius",rotate:"transform",boxshadow:"box-shadow",transform:"transform",visible:"visibility",visibleInView:"visibility",background:"background",color:"color",backgroundImage:"background-image",font:"font"};return g.setAnimation=function(t,e,i){if(!g.capabilities.csstransitions||$manifest$cssDisableTransitions||i&&!i.cssTransition)return!1;var n=C[e];return void 0!==n&&function(t,e,i){var n=g,o=n.getPrefixedName("transition-property"),r=n.getPrefixedName("transition-delay"),a=n.getPrefixedName("transition-duration"),s=n.getPrefixedName("transition-timing-function"),c=t.element;c.forceLayout(),e=n.getPrefixedName(e)||e;var h=c._transitions,l=h[o]||[],d=h[a]||[],p=h[s]||[],u=h[r]||[],f=l.indexOf(e);return-1===f?i&&(l.push(e),d.push(i.duration+"ms"),p.push(i.easing),u.push(i.delay+"ms")):i&&i.active()?(d[f]=i.duration+"ms",p[f]=i.easing,u[f]=i.delay+"ms"):(l.splice(f,1),d.splice(f,1),p.splice(f,1),u.splice(f,1)),h[o]=l,h[a]=d,h[s]=p,h[r]=u,"orsay"!==t._context.system.os&&"netcast"!==t._context.system.os||(h["transition-property"]=l,h["transition-duration"]=d,h["transition-delay"]=u,h["transition-timing-function"]=p),t.style(h),!0}(t,n,i)},g.requestAnimationFrame=p.prefixed("requestAnimationFrame",window)||function(t){return setTimeout(t,0)},g.cancelAnimationFrame=p.prefixed("cancelAnimationFrame",window)||function(t){return clearTimeout(t)},g.enterFullscreenMode=function(t){return p.prefixed("requestFullscreen",t.dom)()},g.exitFullscreenMode=function(){return window.Modernizr.prefixed("exitFullscreen",document)()},g.inFullscreenMode=function(){return!!window.Modernizr.prefixed("fullscreenElement",document)},g.ajax=function(t,e){var i=e.url,n=e.error,o=e.headers,r=e.done,a=e.settings,s=new XMLHttpRequest;for(var c in n&&s.addEventListener("error",n),r&&s.addEventListener("load",r),s.open(e.method||"GET",i),a)s[c]=a[c];for(var c in o)s.setRequestHeader(c,o[c]);e.data?s.send(e.data):s.send()},g.fingerprint=function(t,e){var i=g;try{var n=i.createElement(t,"canvas");n.dom.width=2e3,n.dom.height=32;var o="ABCDEFGHIJKLMNOPQRSTUVWXYZ /0123456789 abcdefghijklmnopqrstuvwxyz £©µÀÆÖÞßéöÿ –—‘“”„†•…‰™œŠŸž€ ΑΒΓΔΩαβγδω АБВГДабвгд ∀∂∈ℝ∧∪≡∞ ↑↗↨↻⇣ ┐┼╔╘░►☺♀ ﬁ�⑀₂ἠḂӥẄɐː⍎אԱა",r=n.dom.getContext("2d");r.textBaseline="top",r.font="20px 'Arial'",r.textBaseline="alphabetic",r.fillStyle="#fedcba",r.fillRect(0,0,2e3,32),r.fillStyle="#12345678",r.fillText(o,1.5,23.5,2e3),r.font="19.5px 'Arial'",r.fillStyle="#789abcde",r.fillText(o,1,22,2e3),e.update(n.dom.toDataURL())}catch(t){log("canvas test failed: "+t)}try{e.update(window.navigator.userAgent)}catch(t){log(t)}try{e.update(window.navigator.plugins)}catch(t){log(t)}try{e.update(window.navigator.mimeTypes)}catch(t){log(t)}try{e.update(window.navigator.language)}catch(t){log(t)}try{e.update(window.navigator.platform)}catch(t){log(t)}try{e.update(window.navigator.product)}catch(t){log(t)}try{e.update(window.navigator.productSub)}catch(t){log(t)}try{e.update(window.navigator.vendorSub)}catch(t){log(t)}try{e.update(window.navigator.hardwareConcurrency)}catch(t){log(t)}try{e.update(window.screen.availWidth)}catch(t){log(t)}try{e.update(window.screen.availHeight)}catch(t){log(t)}try{e.update(window.screen.colorDepth)}catch(t){log(t)}},g}(),k.html5.cache=function(){function n(){return Math.floor((new Date).getTime()/1e3)}function o(){this.created=n(),this.waiters=[],this.invoker=null}var t={};o.prototype.expired=function(t){return n()-this.created>=t},o.prototype.set=function(t){this.created=n();for(var e=this.invoker=k.core.safeCall(null,[t],function(t){log("cache entry callback failed: ",t,t.stack)});this.waiters.length;){var i=this.waiters;this.waiters=[],i.forEach(e)}this.waiters=null},o.prototype.wait=function(t){null!==this.invoker?this.invoker(t):this.waiters.push(t)};function e(t,e){if(!t)throw new Error("create callback is required");this._create=t,this._ttl=e||3600,this._cache={},setInterval(this.cleanup.bind(this),this._ttl/2*1e3)}return e.prototype.get=function(t,e){var i=this._cache[t];void 0!==i&&!i.expired(this._ttl)||(this._cache[t]=i=new o,this._create(t,function(t){i.set(t)})),i.wait(e)},e.prototype.cleanup=function(){for(var t in this._cache){this._cache[t].expired(this._ttl)&&delete this._cache[t]}},t.Cache=e,t}(),k.html5.localstorage=(Xi={},nn.prototype.get=function(t,e,i){var n=this._storage.getItem(t);null!==n?e(n):i(new Error("no item with name "+t))},nn.prototype.set=function(t,e){this._storage.setItem(t,e)},nn.prototype.erase=function(t,e){this._storage.removeItem(t)},Xi.createLocalStorage=function(t){return new nn(t)},Xi.LocalStorage=nn,Xi),k.html5.location=(qi={},on.prototype.updateActualValues=function(){var t=this._ui,e=t._context.window.dom;t.hash=e.location.hash,t.href=e.location.href,t.port=e.location.port,t.host=e.location.host,t.origin=e.location.origin,t.hostname=e.location.hostname,t.pathname=e.location.pathname,t.protocol=e.location.protocol,t.search=e.location.search,t.state=e.history.state},on.prototype.changeHref=function(t){this._ui._context.window.dom.location.href=t,this.updateActualValues()},on.prototype.pushState=function(t,e,i){var n=this._ui,o=n._context.window.dom;o.location.hostname?(o.history.pushState(t,e,i),this.updateActualValues()):(n._context.document.title=e,this._ui.state=t)},qi.createLocation=function(t){return new on(t)},qi.Location=on,qi),k.video.html5.backend=(Gi={},rn.prototype.setEventListeners=function(){var t=this.element,e=t.dom,i=this.ui;t.on("play",function(){i.waiting=!1,i.paused=e.paused}.bind(i)),t.on("pause",function(){i.paused=e.paused}.bind(i)),t.on("ended",function(){i.finished()}.bind(i)),t.on("seeked",function(){log("seeked"),i.seeking=!1,i.waiting=!1}.bind(i)),t.on("canplay",function(){log("canplay",e.readyState),i.ready=e.readyState}.bind(i)),t.on("seeking",function(){log("seeking"),i.seeking=!0,i.waiting=!0}.bind(i)),t.on("waiting",function(){log("waiting"),i.waiting=!0}.bind(i)),t.on("stalled",function(){log("Was stalled",e.networkState),i.stalled=!0}.bind(i)),t.on("emptied",function(){log("Was emptied",e.networkState)}.bind(i)),t.on("volumechange",function(){i.muted=e.muted}.bind(i)),t.on("canplaythrough",function(){log("ready to play"),i.paused=e.paused}.bind(i)),t.on("error",function(){if(log("Player error occurred",e.error,"src",i.source),e.error&&i.source)switch(i.error(e.error),log("player.error",e.error),e.error.code){case 1:log("MEDIA_ERR_ABORTED error occurred");break;case 2:log("MEDIA_ERR_NETWORK error occurred");break;case 3:log("MEDIA_ERR_DECODE error occurred");break;case 4:log("MEDIA_ERR_SRC_NOT_SUPPORTED error occurred");break;default:log("UNDEFINED error occurred")}}.bind(i)),t.on("timeupdate",function(){i.waiting=!1,i.stalled=!1,i.seeking||(i.progress=e.currentTime)}.bind(i)),t.on("durationchange",function(){var t=e.duration;log("Duration",t),i.duration=isFinite(t)?t:0}.bind(i)),t.on("progress",function(){var t=e.buffered.length-1;i.waiting=!1,0<=t&&(i.buffered=e.buffered.end(t)-e.buffered.start(t))}.bind(i)),this.setOption("autoplay",i.autoPlay)},rn.prototype.parseManifest=function(t){var e=t.target.responseText.split("\n"),i=this.ui.source,n=i.substring(0,i.lastIndexOf("/")+1),o=0;this._videoTracks=[{name:"auto",url:this.ui.source,id:o}],this._totalTracks={},this._audioTracksInfo=[];for(var r=0;r<e.length-1;++r){var a=e[r],s=e[r+1];if(0==a.indexOf("#EXT-X-STREAM-INF")){for(var c=a.split(","),h={url:0===s.indexOf("http")?s:n+s},l=0;l<c.length;++l)if(1<(u=c[l].split("=")).length)switch(u[0].trim().toLowerCase()){case"bandwidth":h.bandwidth=u[1].trim();break;case"audio":h.audio=u[1].trim().replace(/"/g,"");break;case"resolution":var d=u[1].split("x");h.width=d[0],h.height=d[1]}var p=h.width+"x"+h.height;this._totalTracks[p]||(this._totalTracks[p]=[]),this._totalTracks[p].push(h)}else if(0==a.indexOf("#EXT-X-MEDIA:TYPE=AUDIO")){for(var u,c=a.split(","),f={},l=0;l<c.length;++l)if(1<(u=c[l].split("=")).length)switch(u[0].trim().toLowerCase()){case"group-id":f.id=u[1].trim().replace(/"/g,"");break;case"name":f.label=u[1].trim().replace(/"/g,"");break;case"language":f.language=u[1].trim().replace(/"/g,"");break;case"uri":f.url=u[1].trim()}this._audioTracksInfo.push(f)}}for(var r in this._totalTracks){var g=this._totalTracks[r][0];g.id=++o,this._videoTracks.push(g)}},rn.prototype.getFileExtension=function(t){if(!t)return"";var e=t.toLowerCase(),i=t.indexOf("?");0<=i&&(e=e.substring(0,i));var n=e.lastIndexOf(".");return e.substring(n,e.length)},rn.prototype.setSource=function(t){this.ui.ready=!1,this._extension=this.getFileExtension(t),t&&this._xhr&&(".m3u8"===this._extension||".m3u"===this._extension)&&(this._xhr.open("GET",t),this._xhr.send());var e=t;this.ui.startPosition&&(e+="#t="+this.ui.startPosition),this.element.dom.src=e},rn.prototype.play=function(){this.element.dom.play()},rn.prototype.pause=function(){this.element.dom.pause()},rn.prototype.stop=function(){this.pause()},rn.prototype.seek=function(t){this.element.dom.currentTime+=t},rn.prototype.seekTo=function(t){this.element.dom.currentTime=t},rn.prototype.setVolume=function(t){this.element.dom.volume=t},rn.prototype.setMute=function(t){this.element.dom.muted=t},rn.prototype.setLoop=function(t){this.element.dom.loop=t},rn.prototype.setOption=function(t,e){"autoplay"===t?e?this.element.dom.setAttribute("autoplay",""):this.element.dom.removeAttribute("autoplay"):this.element.dom.setAttribute(t,e)},rn.prototype.setRect=function(t,e,i,n){},rn.prototype.setVisibility=function(t){log("VISIBILITY LOGIC MISSING HERE, visible:",t)},rn.prototype.setupDrm=function(t,e,i,n){log("Not implemented")},rn.prototype.getAudioTracks=function(){return log("Not implemented"),[]},rn.prototype.getVideoTracks=function(){return this._videoTracks||[]},rn.prototype.getAudioTracks=function(){for(var t=this.element.dom.audioTracks,e=[],i=0;i<t.length;++i){var n=t[i],o=this._audioTracksInfo[i];e.push({id:i,name:n.label?n.label:o.name,language:n.language?n.language:o.language})}return log("getAudioTracks",e),e},rn.prototype.setAudioTrack=function(t){var e=this.element.dom.audioTracks;if(t<0||t>=e.length)log("Where is no track",t);else{log("Set audio track",e[t]);for(var i=0;i<e.length;++i)e[i].enabled=i===t}},rn.prototype.setVideoTrack=function(t){var e;!this._videoTracks||this._videoTracks.length<=0?log("There is no available video track",this._videoTracks):t<0||t>=this._videoTracks.length?log("Track with id",t,"not found"):(this.ui.waiting=!0,e=this.ui.progress,log("Set video",this._videoTracks[t]),this.element.dom.src=this._videoTracks[t].url,this.seekTo(e))},rn.prototype.setVideoTrack=function(t){var e;!this._videoTracks||this._videoTracks.length<=0?log("There is no available video track",this._videoTracks):t<0||t>=this._videoTracks.length?log("Track with id",t,"not found"):(this.ui.waiting=!0,e=this.ui.progress,log("Set video",this._videoTracks[t]),this.element.dom.src=this._videoTracks[t].url,this.seekTo(e))},rn.prototype.setBackgroundColor=function(t){var e=k.core.Color;this.element.dom.style.backgroundColor=new e(t).rgba()},Gi.createPlayer=function(t){return new rn(t)},Gi.probeUrl=function(t){return 50},Gi.Player=rn,Gi),k.web.device=((Ki={}).createDevice=function(t){return new an(t)},Ki.Device=an,Ki),k.controls.pure.format=((Zi={currency:function(t,e,i){var n="\\d(?=(\\d{"+(i||3)+"})+"+(0<e?"\\.":"$")+")";return t.toFixed(Math.max(0,~~e)).replace(new RegExp(n,"g"),"$&,")}}).format=function(){var t=[].slice.call(arguments),e=t.shift();return t.reduce(function(t,e){return t.replace("%s",e)},e)},Zi),t}(),l10n={},context=qml._context=new qml.core.Context(null,!1,{id:"qml-context-app",l10n:l10n,nativeContext:null});context.init(),context.start(new qml.src.UiApp(context)),context.run();
